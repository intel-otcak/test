From 1e704c378f1d10245264a3b94a244299532ebd49 Mon Sep 17 00:00:00 2001
From: mgotefox <manishx.gotefode@intel.com>
Date: Tue, 15 Mar 2016 14:48:49 -0700
Subject: [PATCH 2/2] atomisp2: css2400 and 2401 irci_ecr-master_20160315_0113

Merge CSS2.1 for css2400 and 2401_legacy for
irci_ecr-master_20160315_0113 firmware tag

Change-Id: I0424993a76b2f2710492b4f4bc28dff476fc8683
Signed-off-by: mgotefox <manishx.gotefode@intel.com>
Original-Tracked_On:
Reviewed-on: https://icggerrit.ir.intel.com/107991
Build: Dessert M BXT RVP (SC)
Build: Dessert M BTNS (SC)
Approver: WeiX Meng <weix.meng@intel.com>
Integrator: WeiX Meng <weix.meng@intel.com>
Build: Dessert M CHT FFD (SC)
Reviewed-by: WeiX Meng <weix.meng@intel.com>
Tracked-On: https://jira01.devtools.intel.com/browse/OAM-24395
Signed-off-by: Tao Wei <wei.tao@intel.com>
Reviewed-on: https://android.intel.com:443/483547
---
 .../atomisp2/css/camera/pipe/src/pipe_binarydesc.c |   9 +-
 .../ia_css_isp_params.c                            |  89 +++
 .../ia_css_isp_params.h                            |   9 +
 .../pci/atomisp2/css/css_2400_system/spmem_dump.c  | 712 ++++++++++-----------
 .../ia_css_isp_params.c                            |  89 +++
 .../ia_css_isp_params.h                            |   9 +
 .../css/css_2401_csi2p_system/spmem_dump.c         | 144 ++---
 .../ia_css_isp_params.c                            |  89 +++
 .../ia_css_isp_params.h                            |   9 +
 .../pci/atomisp2/css/css_2401_system/spmem_dump.c  | 184 +++---
 .../media/pci/atomisp2/css/css_api_version.h       |  10 +-
 .../camera/drivers/media/pci/atomisp2/css/ia_css.h |   2 +-
 .../drivers/media/pci/atomisp2/css/ia_css_types.h  |   6 +-
 .../media/pci/atomisp2/css/ia_css_version_data.h   |   2 +-
 .../isp/kernels/bnlm/ia_css_bnlm_default.host.c    |  30 +-
 .../css/isp/kernels/bnlm/ia_css_bnlm_types.h       |  50 +-
 .../css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.c  |  73 ++-
 .../css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.h  |   4 +-
 .../kernels/tdf/tdf_1.0/ia_css_tdf_default.host.c  |  32 +-
 .../css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_param.h |  22 +-
 .../css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_types.h |   7 +-
 .../atomisp2/css/isp/modes/interface/isp_const.h   |  73 +--
 .../css/runtime/binary/interface/ia_css_binary.h   |  20 +-
 .../atomisp2/css/runtime/pipeline/src/pipeline.c   |   8 +-
 .../camera/drivers/media/pci/atomisp2/css/sh_css.c |   3 -
 .../drivers/media/pci/atomisp2/css/sh_css_defs.h   |   6 +-
 .../media/pci/atomisp2/css/sh_css_firmware.c       |   4 +-
 .../drivers/media/pci/atomisp2/css/sh_css_params.c |   3 +
 .../drivers/media/pci/atomisp2/css/sh_css_params.h |  19 +-
 29 files changed, 1039 insertions(+), 678 deletions(-)

diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/camera/pipe/src/pipe_binarydesc.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/camera/pipe/src/pipe_binarydesc.c
index 1b447e5..1815180 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/camera/pipe/src/pipe_binarydesc.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/camera/pipe/src/pipe_binarydesc.c
@@ -585,14 +585,12 @@ void ia_css_pipe_get_capturepp_binarydesc(
 }
 
 /* lookup table for high quality primary binaries */
-static unsigned int primary_hq_binary_modes[NUM_PRIMARY_HQ_STAGES] =
+static unsigned int primary_hq_binary_modes[NUM_PRIMARY_HQ27_STAGES] =
 {
 	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE0,
 	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE1,
 	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE2,
-	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE3,
-	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE4,
-	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE5
+	IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE3
 };
 
 void ia_css_pipe_get_primary_binarydesc(
@@ -765,7 +763,8 @@ void ia_css_pipe_get_post_gdc_binarydesc(
 static unsigned int pre_de_isp27_modes[MAX_NUM_PRE_DE_STAGES] =
 {
 	IA_CSS_BINARY_MODE_PRE_DE,
-	IA_CSS_BINARY_MODE_PRE_DE_STAGE1
+	IA_CSS_BINARY_MODE_PRE_DE_STAGE1,
+	IA_CSS_BINARY_MODE_PRE_DE_STAGE2
 };
 
 void ia_css_pipe_get_pre_de_binarydesc(
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.c
index 70bf169..418a933 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.c
@@ -446,6 +446,56 @@ size);
 /* Code generated by genparam/gencode.c:gen_process_function() */
 
 static void
+ia_css_process_tdf(
+	unsigned pipe_id,
+	const struct ia_css_pipeline_stage *stage,
+	struct ia_css_isp_parameters *params)
+{
+	assert(params != NULL);
+
+	{
+		unsigned size   = stage->binary->info->mem_offsets.offsets.param->vmem.tdf.size;
+
+		unsigned offset = stage->binary->info->mem_offsets.offsets.param->vmem.tdf.offset;
+
+		if (size) {
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() enter:\n");
+
+			ia_css_tdf_vmem_encode((struct tdf_vmem_params *)
+					&stage->binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_VMEM].address[offset],
+					&params->tdf_config,
+size);
+			params->isp_params_changed = true;
+			params->isp_mem_params_changed[pipe_id][stage->stage_num][IA_CSS_ISP_VMEM] = true;
+
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() leave:\n");
+		}
+
+	}
+	{
+		unsigned size   = stage->binary->info->mem_offsets.offsets.param->dmem.tdf.size;
+
+		unsigned offset = stage->binary->info->mem_offsets.offsets.param->dmem.tdf.offset;
+
+		if (size) {
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() enter:\n");
+
+			ia_css_tdf_encode((struct tdf_dmem_params *)
+					&stage->binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset],
+					&params->tdf_config,
+size);
+			params->isp_params_changed = true;
+			params->isp_mem_params_changed[pipe_id][stage->stage_num][IA_CSS_ISP_DMEM] = true;
+
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() leave:\n");
+		}
+
+	}
+}
+
+/* Code generated by genparam/gencode.c:gen_process_function() */
+
+static void
 ia_css_process_eed1_8(
 	unsigned pipe_id,
 	const struct ia_css_pipeline_stage *stage,
@@ -1964,6 +2014,7 @@ void (* ia_css_kernel_process_param[IA_CSS_NUM_PARAMETER_IDS])(
 	ia_css_process_bnr,
 	ia_css_process_dpc2,
 	ia_css_process_bnlm,
+	ia_css_process_tdf,
 	ia_css_process_eed1_8,
 	ia_css_process_de,
 	ia_css_process_ecd,
@@ -2120,6 +2171,42 @@ ia_css_set_bnlm_config(struct ia_css_isp_parameters *params,
 /* Code generated by genparam/gencode.c:gen_get_function() */
 
 static void
+ia_css_get_tdf_config(const struct ia_css_isp_parameters *params,
+			struct ia_css_tdf_config *config){
+	if (config == NULL)
+		return;
+
+	assert(params != NULL);
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_get_tdf_config() enter: "
+		"config=%p\n",config);
+
+	*config = params->tdf_config;
+
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_get_tdf_config() leave\n");
+	ia_css_tdf_debug_dtrace(config, IA_CSS_DEBUG_TRACE);
+}
+
+/* Code generated by genparam/gencode.c:gen_set_function() */
+
+void
+ia_css_set_tdf_config(struct ia_css_isp_parameters *params,
+			const struct ia_css_tdf_config *config)
+{
+	if (config == NULL)
+		return;
+
+	assert(params != NULL);
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE, "ia_css_set_tdf_config() enter:\n");
+	ia_css_tdf_debug_dtrace(config, IA_CSS_DEBUG_TRACE);
+	params->tdf_config = *config;
+	params->config_changed[IA_CSS_TDF_ID] = true;
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_set_tdf_config() leave: "
+		"return_void\n");
+}
+
+/* Code generated by genparam/gencode.c:gen_get_function() */
+
+static void
 ia_css_get_eed1_8_config(const struct ia_css_isp_parameters *params,
 			struct ia_css_eed1_8_config *config){
 	if (config == NULL)
@@ -3664,6 +3751,7 @@ ia_css_get_configs(struct ia_css_isp_parameters *params,
 	ia_css_get_dp_config(params, config->dp_config);
 	ia_css_get_dpc2_config(params, config->dpc2_config);
 	ia_css_get_bnlm_config(params, config->bnlm_config);
+	ia_css_get_tdf_config(params, config->tdf_config);
 	ia_css_get_eed1_8_config(params, config->eed1_8_config);
 	ia_css_get_wb_config(params, config->wb_config);
 	ia_css_get_tnr_config(params, config->tnr_config);
@@ -3717,6 +3805,7 @@ ia_css_set_configs(struct ia_css_isp_parameters *params,
 	ia_css_set_dp_config(params, config->dp_config);
 	ia_css_set_dpc2_config(params, config->dpc2_config);
 	ia_css_set_bnlm_config(params, config->bnlm_config);
+	ia_css_set_tdf_config(params, config->tdf_config);
 	ia_css_set_eed1_8_config(params, config->eed1_8_config);
 	ia_css_set_wb_config(params, config->wb_config);
 	ia_css_set_tnr_config(params, config->tnr_config);
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.h
index 2b971c8..3ab1013 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/hive_isp_css_2400_system_generated/ia_css_isp_params.h
@@ -30,6 +30,7 @@ enum ia_css_parameter_ids {
 	IA_CSS_BNR_ID,
 	IA_CSS_DPC2_ID,
 	IA_CSS_BNLM_ID,
+	IA_CSS_TDF_ID,
 	IA_CSS_EED1_8_ID,
 	IA_CSS_DE_ID,
 	IA_CSS_ECD_ID,
@@ -90,6 +91,7 @@ struct ia_css_memory_offsets {
 		struct ia_css_isp_parameter bnr;
 		struct ia_css_isp_parameter dpc2;
 		struct ia_css_isp_parameter bnlm;
+		struct ia_css_isp_parameter tdf;
 		struct ia_css_isp_parameter eed1_8;
 		struct ia_css_isp_parameter de;
 		struct ia_css_isp_parameter ecd;
@@ -132,6 +134,7 @@ struct ia_css_memory_offsets {
 	struct {
 		struct ia_css_isp_parameter anr2;
 		struct ia_css_isp_parameter bnlm;
+		struct ia_css_isp_parameter tdf;
 		struct ia_css_isp_parameter eed1_8;
 		struct ia_css_isp_parameter ob;
 		struct ia_css_isp_parameter macc1_5;
@@ -195,6 +198,12 @@ ia_css_set_bnlm_config(struct ia_css_isp_parameters *params,
 /* Code generated by genparam/gencode.c:gen_set_function() */
 
 void
+ia_css_set_tdf_config(struct ia_css_isp_parameters *params,
+			const struct ia_css_tdf_config *config);
+
+/* Code generated by genparam/gencode.c:gen_set_function() */
+
+void
 ia_css_set_eed1_8_config(struct ia_css_isp_parameters *params,
 			const struct ia_css_eed1_8_config *config);
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/spmem_dump.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/spmem_dump.c
index a3696ea..97d1f69 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/spmem_dump.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2400_system/spmem_dump.c
@@ -23,7 +23,7 @@ more details.
 
 /* function input_system_acquisition_stop: AD8 */
 
-/* function longjmp: 6C0A */
+/* function longjmp: 6BF2 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_HIVE_IF_SRST_MASK
@@ -37,11 +37,11 @@ more details.
 #define HIVE_ADDR_sp_HIVE_IF_SRST_MASK 0x1C8
 #define HIVE_SIZE_sp_HIVE_IF_SRST_MASK 16
 
-/* function tmpmem_init_dmem: 6904 */
+/* function tmpmem_init_dmem: 68EC */
 
-/* function ia_css_isys_sp_token_map_receive_ack: 6248 */
+/* function ia_css_isys_sp_token_map_receive_ack: 6230 */
 
-/* function ia_css_dmaproxy_sp_set_addr_B: 3715 */
+/* function ia_css_dmaproxy_sp_set_addr_B: 371A */
 
 /* function ia_css_pipe_data_init_tagger_resources: A4F */
 
@@ -52,51 +52,51 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_vbuf_mipi
 #define HIVE_MEM_vbuf_mipi scalar_processor_2400_dmem
-#define HIVE_ADDR_vbuf_mipi 0x6508
+#define HIVE_ADDR_vbuf_mipi 0x6590
 #define HIVE_SIZE_vbuf_mipi 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_vbuf_mipi scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_vbuf_mipi 0x6508
+#define HIVE_ADDR_sp_vbuf_mipi 0x6590
 #define HIVE_SIZE_sp_vbuf_mipi 12
 
-/* function ia_css_event_sp_decode: 3906 */
+/* function ia_css_event_sp_decode: 390B */
 
-/* function ia_css_queue_get_size: 4D2E */
+/* function ia_css_queue_get_size: 4D35 */
 
-/* function ia_css_queue_load: 5345 */
+/* function ia_css_queue_load: 533C */
 
-/* function setjmp: 6C13 */
+/* function setjmp: 6BFB */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_sp2host_isys_event_queue
 #define HIVE_MEM_sem_for_sp2host_isys_event_queue scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_sp2host_isys_event_queue 0x4860
+#define HIVE_ADDR_sem_for_sp2host_isys_event_queue 0x48E4
 #define HIVE_SIZE_sem_for_sp2host_isys_event_queue 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_sp2host_isys_event_queue scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_sp2host_isys_event_queue 0x4860
+#define HIVE_ADDR_sp_sem_for_sp2host_isys_event_queue 0x48E4
 #define HIVE_SIZE_sp_sem_for_sp2host_isys_event_queue 20
 
-/* function ia_css_dmaproxy_sp_wait_for_ack: 7194 */
+/* function ia_css_dmaproxy_sp_wait_for_ack: 717C */
 
-/* function ia_css_sp_rawcopy_func: 557F */
+/* function ia_css_sp_rawcopy_func: 5567 */
 
-/* function ia_css_tagger_buf_sp_pop_marked: 2D8E */
+/* function ia_css_tagger_buf_sp_pop_marked: 2D93 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_isp_stage
 #define HIVE_MEM_isp_stage scalar_processor_2400_dmem
-#define HIVE_ADDR_isp_stage 0x5DF0
+#define HIVE_ADDR_isp_stage 0x5E78
 #define HIVE_SIZE_isp_stage 832
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_isp_stage scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_stage 0x5DF0
+#define HIVE_ADDR_sp_isp_stage 0x5E78
 #define HIVE_SIZE_sp_isp_stage 832
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -111,32 +111,32 @@ more details.
 #define HIVE_ADDR_sp_vbuf_raw 0x314
 #define HIVE_SIZE_sp_vbuf_raw 4
 
-/* function ia_css_sp_bin_copy_func: 54A5 */
+/* function ia_css_sp_bin_copy_func: 548D */
 
-/* function ia_css_queue_item_store: 5093 */
+/* function ia_css_queue_item_store: 509A */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_metadata_bufs
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_metadata_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_metadata_bufs 0x4C90
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_metadata_bufs 0x4D14
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_metadata_bufs 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_metadata_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_metadata_bufs 0x4C90
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_metadata_bufs 0x4D14
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_metadata_bufs 20
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_buffer_bufs
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_buffer_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_buffer_bufs 0x4CA4
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_buffer_bufs 0x4D28
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_buffer_bufs 160
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_buffer_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_buffer_bufs 0x4CA4
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_buffer_bufs 0x4D28
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_buffer_bufs 160
 
 /* function sp_start_isp: 45D */
@@ -144,95 +144,95 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_binary_group
 #define HIVE_MEM_sp_binary_group scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_binary_group 0x61E0
+#define HIVE_ADDR_sp_binary_group 0x6268
 #define HIVE_SIZE_sp_binary_group 32
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_binary_group scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_binary_group 0x61E0
+#define HIVE_ADDR_sp_sp_binary_group 0x6268
 #define HIVE_SIZE_sp_sp_binary_group 32
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_sw_state
 #define HIVE_MEM_sp_sw_state scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sw_state 0x6498
+#define HIVE_ADDR_sp_sw_state 0x6520
 #define HIVE_SIZE_sp_sw_state 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_sw_state scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_sw_state 0x6498
+#define HIVE_ADDR_sp_sp_sw_state 0x6520
 #define HIVE_SIZE_sp_sp_sw_state 4
 
 /* function ia_css_thread_sp_main: D50 */
 
-/* function ia_css_ispctrl_sp_init_internal_buffers: 3B47 */
+/* function ia_css_ispctrl_sp_init_internal_buffers: 3B4C */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp2host_psys_event_queue_handle
 #define HIVE_MEM_sp2host_psys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp2host_psys_event_queue_handle 0x4D44
+#define HIVE_ADDR_sp2host_psys_event_queue_handle 0x4DC8
 #define HIVE_SIZE_sp2host_psys_event_queue_handle 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp2host_psys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp2host_psys_event_queue_handle 0x4D44
+#define HIVE_ADDR_sp_sp2host_psys_event_queue_handle 0x4DC8
 #define HIVE_SIZE_sp_sp2host_psys_event_queue_handle 12
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_sp2host_psys_event_queue
 #define HIVE_MEM_sem_for_sp2host_psys_event_queue scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_sp2host_psys_event_queue 0x4874
+#define HIVE_ADDR_sem_for_sp2host_psys_event_queue 0x48F8
 #define HIVE_SIZE_sem_for_sp2host_psys_event_queue 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_sp2host_psys_event_queue scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_sp2host_psys_event_queue 0x4874
+#define HIVE_ADDR_sp_sem_for_sp2host_psys_event_queue 0x48F8
 #define HIVE_SIZE_sp_sem_for_sp2host_psys_event_queue 20
 
-/* function ia_css_tagger_buf_sp_get_capture_from_start: 2C7C */
+/* function ia_css_tagger_buf_sp_get_capture_from_start: 2C81 */
 
-/* function ia_css_tagger_sp_propagate_frame: 2490 */
+/* function ia_css_tagger_sp_propagate_frame: 2495 */
 
 /* function input_system_reg_load: B11 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_vbuf_handles
 #define HIVE_MEM_vbuf_handles scalar_processor_2400_dmem
-#define HIVE_ADDR_vbuf_handles 0x6514
+#define HIVE_ADDR_vbuf_handles 0x659C
 #define HIVE_SIZE_vbuf_handles 960
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_vbuf_handles scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_vbuf_handles 0x6514
+#define HIVE_ADDR_sp_vbuf_handles 0x659C
 #define HIVE_SIZE_sp_vbuf_handles 960
 
-/* function ia_css_queue_store: 51F9 */
+/* function ia_css_queue_store: 5200 */
 
-/* function ia_css_sp_flash_register: 2FC3 */
+/* function ia_css_sp_flash_register: 2FC8 */
 
-/* function ia_css_isys_sp_backend_create: 5EBB */
+/* function ia_css_isys_sp_backend_create: 5EA3 */
 
-/* function ia_css_pipeline_sp_init: 187B */
+/* function ia_css_pipeline_sp_init: 187F */
 
-/* function ia_css_tagger_sp_configure: 2380 */
+/* function ia_css_tagger_sp_configure: 2385 */
 
-/* function ia_css_ispctrl_sp_end_binary: 394F */
+/* function ia_css_ispctrl_sp_end_binary: 3954 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs
 #define HIVE_MEM_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs 0x4D50
+#define HIVE_ADDR_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs 0x4DD4
 #define HIVE_SIZE_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs 0x4D50
+#define HIVE_ADDR_sp_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs 0x4DD4
 #define HIVE_SIZE_sp_ia_css_bufq_sp_h_pipe_private_per_frame_ddr_ptrs 20
 
 /* function receiver_port_reg_store: AC3 */
@@ -252,114 +252,114 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cb_elems_frame
 #define HIVE_MEM_sp_all_cb_elems_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_all_cb_elems_frame 0x4888
+#define HIVE_ADDR_sp_all_cb_elems_frame 0x490C
 #define HIVE_SIZE_sp_all_cb_elems_frame 16
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_all_cb_elems_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_all_cb_elems_frame 0x4888
+#define HIVE_ADDR_sp_sp_all_cb_elems_frame 0x490C
 #define HIVE_SIZE_sp_sp_all_cb_elems_frame 16
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp2host_isys_event_queue_handle
 #define HIVE_MEM_sp2host_isys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp2host_isys_event_queue_handle 0x4D64
+#define HIVE_ADDR_sp2host_isys_event_queue_handle 0x4DE8
 #define HIVE_SIZE_sp2host_isys_event_queue_handle 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp2host_isys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp2host_isys_event_queue_handle 0x4D64
+#define HIVE_ADDR_sp_sp2host_isys_event_queue_handle 0x4DE8
 #define HIVE_SIZE_sp_sp2host_isys_event_queue_handle 12
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host_sp_com
 #define HIVE_MEM_host_sp_com scalar_processor_2400_dmem
-#define HIVE_ADDR_host_sp_com 0x428C
+#define HIVE_ADDR_host_sp_com 0x42FC
 #define HIVE_SIZE_host_sp_com 220
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_host_sp_com scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_host_sp_com 0x428C
+#define HIVE_ADDR_sp_host_sp_com 0x42FC
 #define HIVE_SIZE_sp_host_sp_com 220
 
-/* function ia_css_queue_get_free_space: 4E58 */
+/* function ia_css_queue_get_free_space: 4E5F */
 
 /* function exec_image_pipe: 658 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_init_dmem_data
 #define HIVE_MEM_sp_init_dmem_data scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_init_dmem_data 0x649C
+#define HIVE_ADDR_sp_init_dmem_data 0x6524
 #define HIVE_SIZE_sp_init_dmem_data 24
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_init_dmem_data scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_init_dmem_data 0x649C
+#define HIVE_ADDR_sp_sp_init_dmem_data 0x6524
 #define HIVE_SIZE_sp_sp_init_dmem_data 24
 
-/* function ia_css_sp_metadata_start: 5C98 */
+/* function ia_css_sp_metadata_start: 5C80 */
 
-/* function ia_css_bufq_sp_init_buffer_queues: 3032 */
+/* function ia_css_bufq_sp_init_buffer_queues: 3037 */
 
-/* function ia_css_pipeline_sp_stop: 185E */
+/* function ia_css_pipeline_sp_stop: 1862 */
 
-/* function ia_css_tagger_sp_connect_pipes: 2966 */
+/* function ia_css_tagger_sp_connect_pipes: 296B */
 
 /* function sp_isys_copy_wait: 6A1 */
 
 /* function is_isp_debug_buffer_full: 337 */
 
-/* function ia_css_dmaproxy_sp_configure_channel_from_info: 3685 */
+/* function ia_css_dmaproxy_sp_configure_channel_from_info: 368A */
 
 /* function encode_and_post_timer_event: 9C4 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_per_frame_data
 #define HIVE_MEM_sp_per_frame_data scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_per_frame_data 0x4368
+#define HIVE_ADDR_sp_per_frame_data 0x43D8
 #define HIVE_SIZE_sp_per_frame_data 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_per_frame_data scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_per_frame_data 0x4368
+#define HIVE_ADDR_sp_sp_per_frame_data 0x43D8
 #define HIVE_SIZE_sp_sp_per_frame_data 4
 
-/* function ia_css_rmgr_sp_vbuf_dequeue: 6658 */
+/* function ia_css_rmgr_sp_vbuf_dequeue: 6640 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host2sp_psys_event_queue_handle
 #define HIVE_MEM_host2sp_psys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_host2sp_psys_event_queue_handle 0x4D70
+#define HIVE_ADDR_host2sp_psys_event_queue_handle 0x4DF4
 #define HIVE_SIZE_host2sp_psys_event_queue_handle 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_host2sp_psys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_host2sp_psys_event_queue_handle 0x4D70
+#define HIVE_ADDR_sp_host2sp_psys_event_queue_handle 0x4DF4
 #define HIVE_SIZE_sp_host2sp_psys_event_queue_handle 12
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_xmem_bin_addr
 #define HIVE_MEM_xmem_bin_addr scalar_processor_2400_dmem
-#define HIVE_ADDR_xmem_bin_addr 0x436C
+#define HIVE_ADDR_xmem_bin_addr 0x43DC
 #define HIVE_SIZE_xmem_bin_addr 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_xmem_bin_addr scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_xmem_bin_addr 0x436C
+#define HIVE_ADDR_sp_xmem_bin_addr 0x43DC
 #define HIVE_SIZE_sp_xmem_bin_addr 4
 
-/* function tmr_clock_init: 6924 */
+/* function tmr_clock_init: 690C */
 
-/* function ia_css_pipeline_sp_run: 1424 */
+/* function ia_css_pipeline_sp_run: 1426 */
 
-/* function memcpy: 6CB3 */
+/* function memcpy: 6C9B */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_GP_DEVICE_BASE
@@ -387,26 +387,26 @@ more details.
 
 /* function input_system_reg_store: B18 */
 
-/* function ia_css_isys_sp_frontend_start: 60D1 */
+/* function ia_css_isys_sp_frontend_start: 60B9 */
 
-/* function ia_css_uds_sp_scale_params: 69BC */
+/* function ia_css_uds_sp_scale_params: 69A4 */
 
 /* function ia_css_circbuf_increase_size: E35 */
 
-/* function __divu: 6C31 */
+/* function __divu: 6C19 */
 
 /* function ia_css_thread_sp_get_state: C78 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_cont_capt_stop
 #define HIVE_MEM_sem_for_cont_capt_stop scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_cont_capt_stop 0x4898
+#define HIVE_ADDR_sem_for_cont_capt_stop 0x491C
 #define HIVE_SIZE_sem_for_cont_capt_stop 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_cont_capt_stop scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_cont_capt_stop 0x4898
+#define HIVE_ADDR_sp_sem_for_cont_capt_stop 0x491C
 #define HIVE_SIZE_sp_sem_for_cont_capt_stop 20
 
 /* function thread_fiber_sp_main: E2E */
@@ -414,20 +414,20 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_isp_pipe_thread
 #define HIVE_MEM_sp_isp_pipe_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_pipe_thread 0x49DC
+#define HIVE_ADDR_sp_isp_pipe_thread 0x4A60
 #define HIVE_SIZE_sp_isp_pipe_thread 360
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_isp_pipe_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_isp_pipe_thread 0x49DC
+#define HIVE_ADDR_sp_sp_isp_pipe_thread 0x4A60
 #define HIVE_SIZE_sp_sp_isp_pipe_thread 360
 
-/* function ia_css_parambuf_sp_handle_parameter_sets: 127F */
+/* function ia_css_parambuf_sp_handle_parameter_sets: 1281 */
 
-/* function ia_css_spctrl_sp_set_state: 5CC7 */
+/* function ia_css_spctrl_sp_set_state: 5CAF */
 
-/* function ia_css_thread_sem_sp_signal: 6EB5 */
+/* function ia_css_thread_sem_sp_signal: 6E9D */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_IRQ_BASE
@@ -453,24 +453,24 @@ more details.
 #define HIVE_ADDR_sp_TIMED_CTRL_BASE 0x40
 #define HIVE_SIZE_sp_TIMED_CTRL_BASE 4
 
-/* function ia_css_isys_sp_isr: 7382 */
+/* function ia_css_isys_sp_isr: 736A */
 
-/* function ia_css_isys_sp_generate_exp_id: 6469 */
+/* function ia_css_isys_sp_generate_exp_id: 6451 */
 
-/* function ia_css_rmgr_sp_init: 6553 */
+/* function ia_css_rmgr_sp_init: 653B */
 
-/* function ia_css_thread_sem_sp_init: 6F84 */
+/* function ia_css_thread_sem_sp_init: 6F6C */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_reading_cb_frame
 #define HIVE_MEM_sem_for_reading_cb_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_reading_cb_frame 0x48AC
+#define HIVE_ADDR_sem_for_reading_cb_frame 0x4930
 #define HIVE_SIZE_sem_for_reading_cb_frame 40
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_reading_cb_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_reading_cb_frame 0x48AC
+#define HIVE_ADDR_sp_sem_for_reading_cb_frame 0x4930
 #define HIVE_SIZE_sp_sem_for_reading_cb_frame 40
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -485,15 +485,15 @@ more details.
 #define HIVE_ADDR_sp_is_isp_requested 0x328
 #define HIVE_SIZE_sp_is_isp_requested 4
 
-/* function ia_css_dmaproxy_sp_execute: 35EB */
+/* function ia_css_dmaproxy_sp_execute: 35F0 */
 
-/* function ia_css_queue_is_empty: 72E1 */
+/* function ia_css_queue_is_empty: 72C9 */
 
-/* function ia_css_pipeline_sp_has_stopped: 1854 */
+/* function ia_css_pipeline_sp_has_stopped: 1858 */
 
 /* function ia_css_circbuf_extract: F39 */
 
-/* function ia_css_tagger_buf_sp_is_locked_from_start: 2EA4 */
+/* function ia_css_tagger_buf_sp_is_locked_from_start: 2EA9 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_current_sp_thread
@@ -507,13 +507,13 @@ more details.
 #define HIVE_ADDR_sp_current_sp_thread 0x1DC
 #define HIVE_SIZE_sp_current_sp_thread 4
 
-/* function ia_css_spctrl_sp_get_spid: 5CCE */
+/* function ia_css_spctrl_sp_get_spid: 5CB6 */
 
-/* function ia_css_bufq_sp_reset_buffers: 30B9 */
+/* function ia_css_bufq_sp_reset_buffers: 30BE */
 
-/* function ia_css_dmaproxy_sp_read_byte_addr: 71C2 */
+/* function ia_css_dmaproxy_sp_read_byte_addr: 71AA */
 
-/* function ia_css_rmgr_sp_uninit: 654C */
+/* function ia_css_rmgr_sp_uninit: 6534 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_threads_stack
@@ -531,18 +531,18 @@ more details.
 
 /* function ia_css_parambuf_sp_wait_for_in_param: 1048 */
 
-/* function ia_css_isys_sp_token_map_get_exp_id: 6331 */
+/* function ia_css_isys_sp_token_map_get_exp_id: 6319 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cb_elems_param
 #define HIVE_MEM_sp_all_cb_elems_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_all_cb_elems_param 0x48D4
+#define HIVE_ADDR_sp_all_cb_elems_param 0x4958
 #define HIVE_SIZE_sp_all_cb_elems_param 16
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_all_cb_elems_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_all_cb_elems_param 0x48D4
+#define HIVE_ADDR_sp_sp_all_cb_elems_param 0x4958
 #define HIVE_SIZE_sp_sp_all_cb_elems_param 16
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -560,13 +560,13 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cbs_frame_desc
 #define HIVE_MEM_sp_all_cbs_frame_desc scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_all_cbs_frame_desc 0x48E4
+#define HIVE_ADDR_sp_all_cbs_frame_desc 0x4968
 #define HIVE_SIZE_sp_all_cbs_frame_desc 8
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_all_cbs_frame_desc scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_all_cbs_frame_desc 0x48E4
+#define HIVE_ADDR_sp_sp_all_cbs_frame_desc 0x4968
 #define HIVE_SIZE_sp_sp_all_cbs_frame_desc 8
 
 /* function sp_isys_copy_func_v2: 69A */
@@ -574,91 +574,91 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_reading_cb_param
 #define HIVE_MEM_sem_for_reading_cb_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_reading_cb_param 0x48EC
+#define HIVE_ADDR_sem_for_reading_cb_param 0x4970
 #define HIVE_SIZE_sem_for_reading_cb_param 40
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_reading_cb_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_reading_cb_param 0x48EC
+#define HIVE_ADDR_sp_sem_for_reading_cb_param 0x4970
 #define HIVE_SIZE_sp_sem_for_reading_cb_param 40
 
-/* function ia_css_queue_get_used_space: 4E0C */
+/* function ia_css_queue_get_used_space: 4E13 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_cont_capt_start
 #define HIVE_MEM_sem_for_cont_capt_start scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_cont_capt_start 0x4914
+#define HIVE_ADDR_sem_for_cont_capt_start 0x4998
 #define HIVE_SIZE_sem_for_cont_capt_start 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_cont_capt_start scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_cont_capt_start 0x4914
+#define HIVE_ADDR_sp_sem_for_cont_capt_start 0x4998
 #define HIVE_SIZE_sp_sem_for_cont_capt_start 20
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_tmp_heap
 #define HIVE_MEM_tmp_heap scalar_processor_2400_dmem
-#define HIVE_ADDR_tmp_heap 0x6200
+#define HIVE_ADDR_tmp_heap 0x6288
 #define HIVE_SIZE_tmp_heap 640
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_tmp_heap scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_tmp_heap 0x6200
+#define HIVE_ADDR_sp_tmp_heap 0x6288
 #define HIVE_SIZE_sp_tmp_heap 640
 
-/* function ia_css_rmgr_sp_get_num_vbuf: 685C */
+/* function ia_css_rmgr_sp_get_num_vbuf: 6844 */
 
-/* function ia_css_ispctrl_sp_output_compute_dma_info: 4386 */
+/* function ia_css_ispctrl_sp_output_compute_dma_info: 438D */
 
-/* function ia_css_tagger_sp_lock_exp_id: 214D */
+/* function ia_css_tagger_sp_lock_exp_id: 2152 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_s3a_bufs
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_s3a_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_s3a_bufs 0x4D7C
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_s3a_bufs 0x4E00
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_s3a_bufs 60
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_s3a_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_s3a_bufs 0x4D7C
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_s3a_bufs 0x4E00
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_s3a_bufs 60
 
-/* function ia_css_queue_is_full: 4EA3 */
+/* function ia_css_queue_is_full: 4EAA */
 
 /* function debug_buffer_init_isp: E4 */
 
-/* function ia_css_isys_sp_frontend_uninit: 608B */
+/* function ia_css_isys_sp_frontend_uninit: 6073 */
 
-/* function ia_css_tagger_sp_exp_id_is_locked: 2068 */
+/* function ia_css_tagger_sp_exp_id_is_locked: 206D */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_rmgr_sp_mipi_frame_sem
 #define HIVE_MEM_ia_css_rmgr_sp_mipi_frame_sem scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_rmgr_sp_mipi_frame_sem 0x68D4
+#define HIVE_ADDR_ia_css_rmgr_sp_mipi_frame_sem 0x695C
 #define HIVE_SIZE_ia_css_rmgr_sp_mipi_frame_sem 60
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_rmgr_sp_mipi_frame_sem scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_rmgr_sp_mipi_frame_sem 0x68D4
+#define HIVE_ADDR_sp_ia_css_rmgr_sp_mipi_frame_sem 0x695C
 #define HIVE_SIZE_sp_ia_css_rmgr_sp_mipi_frame_sem 60
 
-/* function ia_css_rmgr_sp_refcount_dump: 6633 */
+/* function ia_css_rmgr_sp_refcount_dump: 661B */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_isp_parameters_id
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_isp_parameters_id scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_isp_parameters_id 0x4DB8
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_isp_parameters_id 0x4E3C
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_isp_parameters_id 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_isp_parameters_id scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_isp_parameters_id 0x4DB8
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_isp_parameters_id 0x4E3C
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_isp_parameters_id 20
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -678,60 +678,60 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host2sp_isys_event_queue_handle
 #define HIVE_MEM_host2sp_isys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_host2sp_isys_event_queue_handle 0x4DCC
+#define HIVE_ADDR_host2sp_isys_event_queue_handle 0x4E50
 #define HIVE_SIZE_host2sp_isys_event_queue_handle 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_host2sp_isys_event_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_host2sp_isys_event_queue_handle 0x4DCC
+#define HIVE_ADDR_sp_host2sp_isys_event_queue_handle 0x4E50
 #define HIVE_SIZE_sp_host2sp_isys_event_queue_handle 12
 
-/* function ia_css_thread_sp_yield: 6E33 */
+/* function ia_css_thread_sp_yield: 6E1B */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cbs_param_desc
 #define HIVE_MEM_sp_all_cbs_param_desc scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_all_cbs_param_desc 0x4928
+#define HIVE_ADDR_sp_all_cbs_param_desc 0x49AC
 #define HIVE_SIZE_sp_all_cbs_param_desc 8
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_all_cbs_param_desc scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_all_cbs_param_desc 0x4928
+#define HIVE_ADDR_sp_sp_all_cbs_param_desc 0x49AC
 #define HIVE_SIZE_sp_sp_all_cbs_param_desc 8
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_dmaproxy_sp_invalidate_tlb
 #define HIVE_MEM_ia_css_dmaproxy_sp_invalidate_tlb scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_dmaproxy_sp_invalidate_tlb 0x5DE4
+#define HIVE_ADDR_ia_css_dmaproxy_sp_invalidate_tlb 0x5E68
 #define HIVE_SIZE_ia_css_dmaproxy_sp_invalidate_tlb 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_dmaproxy_sp_invalidate_tlb scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_dmaproxy_sp_invalidate_tlb 0x5DE4
+#define HIVE_ADDR_sp_ia_css_dmaproxy_sp_invalidate_tlb 0x5E68
 #define HIVE_SIZE_sp_ia_css_dmaproxy_sp_invalidate_tlb 4
 
 /* function ia_css_thread_sp_fork: D05 */
 
-/* function ia_css_tagger_sp_destroy: 2970 */
+/* function ia_css_tagger_sp_destroy: 2975 */
 
-/* function ia_css_dmaproxy_sp_vmem_read: 358B */
+/* function ia_css_dmaproxy_sp_vmem_read: 3590 */
 
-/* function ia_css_ifmtr_sp_init: 64BA */
+/* function ia_css_ifmtr_sp_init: 64A2 */
 
 /* function initialize_sp_group: 668 */
 
-/* function ia_css_tagger_buf_sp_peek: 2CB0 */
+/* function ia_css_tagger_buf_sp_peek: 2CB5 */
 
 /* function ia_css_thread_sp_init: D31 */
 
-/* function ia_css_isys_sp_reset_exp_id: 6461 */
+/* function ia_css_isys_sp_reset_exp_id: 6449 */
 
-/* function qos_scheduler_update_fps: 69AC */
+/* function qos_scheduler_update_fps: 6994 */
 
-/* function ia_css_ispctrl_sp_set_stream_base_addr: 4A7A */
+/* function ia_css_ispctrl_sp_set_stream_base_addr: 4A81 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ISP_DMEM_BASE
@@ -757,9 +757,9 @@ more details.
 #define HIVE_ADDR_sp_SP_DMEM_BASE 0x4
 #define HIVE_SIZE_sp_SP_DMEM_BASE 4
 
-/* function __ia_css_queue_is_empty_text: 4D69 */
+/* function __ia_css_queue_is_empty_text: 4D70 */
 
-/* function ia_css_dmaproxy_sp_read: 3601 */
+/* function ia_css_dmaproxy_sp_read: 3606 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_raw_copy_line_count
@@ -776,27 +776,27 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host2sp_tag_cmd_queue_handle
 #define HIVE_MEM_host2sp_tag_cmd_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_host2sp_tag_cmd_queue_handle 0x4DD8
+#define HIVE_ADDR_host2sp_tag_cmd_queue_handle 0x4E5C
 #define HIVE_SIZE_host2sp_tag_cmd_queue_handle 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_host2sp_tag_cmd_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_host2sp_tag_cmd_queue_handle 0x4DD8
+#define HIVE_ADDR_sp_host2sp_tag_cmd_queue_handle 0x4E5C
 #define HIVE_SIZE_sp_host2sp_tag_cmd_queue_handle 12
 
-/* function ia_css_queue_peek: 4D82 */
+/* function ia_css_queue_peek: 4D89 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_flash_sp_frame_cnt
 #define HIVE_MEM_ia_css_flash_sp_frame_cnt scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_flash_sp_frame_cnt 0x4C84
+#define HIVE_ADDR_ia_css_flash_sp_frame_cnt 0x4D08
 #define HIVE_SIZE_ia_css_flash_sp_frame_cnt 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_flash_sp_frame_cnt scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_flash_sp_frame_cnt 0x4C84
+#define HIVE_ADDR_sp_ia_css_flash_sp_frame_cnt 0x4D08
 #define HIVE_SIZE_sp_ia_css_flash_sp_frame_cnt 4
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -814,26 +814,26 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_isp_thread
 #define HIVE_MEM_isp_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_isp_thread 0x6130
+#define HIVE_ADDR_isp_thread 0x61B8
 #define HIVE_SIZE_isp_thread 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_isp_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_thread 0x6130
+#define HIVE_ADDR_sp_isp_thread 0x61B8
 #define HIVE_SIZE_sp_isp_thread 4
 
 /* function encode_and_post_sp_event_non_blocking: A0C */
 
-/* function ia_css_isys_sp_frontend_destroy: 6163 */
+/* function ia_css_isys_sp_frontend_destroy: 614B */
 
 /* function is_ddr_debug_buffer_full: 2CC */
 
-/* function ia_css_isys_sp_frontend_stop: 60A3 */
+/* function ia_css_isys_sp_frontend_stop: 608B */
 
-/* function ia_css_isys_sp_token_map_init: 63FF */
+/* function ia_css_isys_sp_token_map_init: 63E7 */
 
-/* function ia_css_tagger_buf_sp_get_oldest_marked_offset: 2D00 */
+/* function ia_css_tagger_buf_sp_get_oldest_marked_offset: 2D05 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_threads_fiber
@@ -851,94 +851,94 @@ more details.
 
 /* function debug_enqueue_ddr: EE */
 
-/* function ia_css_rmgr_sp_refcount_init_vbuf: 65EE */
+/* function ia_css_rmgr_sp_refcount_init_vbuf: 65D6 */
 
-/* function dmaproxy_sp_read_write: 7260 */
+/* function dmaproxy_sp_read_write: 7248 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_dmaproxy_isp_dma_cmd_buffer
 #define HIVE_MEM_ia_css_dmaproxy_isp_dma_cmd_buffer scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_dmaproxy_isp_dma_cmd_buffer 0x5DE8
+#define HIVE_ADDR_ia_css_dmaproxy_isp_dma_cmd_buffer 0x5E6C
 #define HIVE_SIZE_ia_css_dmaproxy_isp_dma_cmd_buffer 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_dmaproxy_isp_dma_cmd_buffer scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_dmaproxy_isp_dma_cmd_buffer 0x5DE8
+#define HIVE_ADDR_sp_ia_css_dmaproxy_isp_dma_cmd_buffer 0x5E6C
 #define HIVE_SIZE_sp_ia_css_dmaproxy_isp_dma_cmd_buffer 4
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host2sp_buffer_queue_handle
 #define HIVE_MEM_host2sp_buffer_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_host2sp_buffer_queue_handle 0x4DE4
+#define HIVE_ADDR_host2sp_buffer_queue_handle 0x4E68
 #define HIVE_SIZE_host2sp_buffer_queue_handle 480
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_host2sp_buffer_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_host2sp_buffer_queue_handle 0x4DE4
+#define HIVE_ADDR_sp_host2sp_buffer_queue_handle 0x4E68
 #define HIVE_SIZE_sp_host2sp_buffer_queue_handle 480
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_flash_sp_in_service
 #define HIVE_MEM_ia_css_flash_sp_in_service scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_flash_sp_in_service 0x3278
+#define HIVE_ADDR_ia_css_flash_sp_in_service 0x32C0
 #define HIVE_SIZE_ia_css_flash_sp_in_service 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_flash_sp_in_service scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_flash_sp_in_service 0x3278
+#define HIVE_ADDR_sp_ia_css_flash_sp_in_service 0x32C0
 #define HIVE_SIZE_sp_ia_css_flash_sp_in_service 4
 
-/* function ia_css_dmaproxy_sp_process: 6FAC */
+/* function ia_css_dmaproxy_sp_process: 6F94 */
 
-/* function ia_css_tagger_buf_sp_mark_from_end: 2F88 */
+/* function ia_css_tagger_buf_sp_mark_from_end: 2F8D */
 
-/* function ia_css_isys_sp_backend_rcv_acquire_ack: 5D70 */
+/* function ia_css_isys_sp_backend_rcv_acquire_ack: 5D58 */
 
-/* function ia_css_isys_sp_backend_pre_acquire_request: 5D86 */
+/* function ia_css_isys_sp_backend_pre_acquire_request: 5D6E */
 
-/* function ia_css_ispctrl_sp_init_cs: 3A4A */
+/* function ia_css_ispctrl_sp_init_cs: 3A4F */
 
-/* function ia_css_spctrl_sp_init: 5CDC */
+/* function ia_css_spctrl_sp_init: 5CC4 */
 
 /* function sp_event_proxy_init: 6C4 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_previous_clock_tick
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_previous_clock_tick scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_previous_clock_tick 0x4FC4
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_previous_clock_tick 0x5048
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_previous_clock_tick 40
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_previous_clock_tick scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_previous_clock_tick 0x4FC4
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_previous_clock_tick 0x5048
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_previous_clock_tick 40
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_output
 #define HIVE_MEM_sp_output scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_output 0x4370
+#define HIVE_ADDR_sp_output 0x43E0
 #define HIVE_SIZE_sp_output 16
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_output scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_output 0x4370
+#define HIVE_ADDR_sp_sp_output 0x43E0
 #define HIVE_SIZE_sp_sp_output 16
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_sems_for_host2sp_buf_queues
 #define HIVE_MEM_ia_css_bufq_sp_sems_for_host2sp_buf_queues scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_sems_for_host2sp_buf_queues 0x4FEC
+#define HIVE_ADDR_ia_css_bufq_sp_sems_for_host2sp_buf_queues 0x5070
 #define HIVE_SIZE_ia_css_bufq_sp_sems_for_host2sp_buf_queues 800
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_sems_for_host2sp_buf_queues scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_sems_for_host2sp_buf_queues 0x4FEC
+#define HIVE_ADDR_sp_ia_css_bufq_sp_sems_for_host2sp_buf_queues 0x5070
 #define HIVE_SIZE_sp_ia_css_bufq_sp_sems_for_host2sp_buf_queues 800
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -965,38 +965,38 @@ more details.
 #define HIVE_ADDR_sp_INPUT_FORMATTER_BASE 0x4C
 #define HIVE_SIZE_sp_INPUT_FORMATTER_BASE 16
 
-/* function sp_dma_proxy_reset_channels: 3870 */
+/* function sp_dma_proxy_reset_channels: 3875 */
 
-/* function ia_css_isys_sp_backend_acquire: 5E91 */
+/* function ia_css_isys_sp_backend_acquire: 5E79 */
 
-/* function ia_css_tagger_sp_update_size: 2C12 */
+/* function ia_css_tagger_sp_update_size: 2C17 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_host_sp_queue
 #define HIVE_MEM_ia_css_bufq_host_sp_queue scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_host_sp_queue 0x530C
+#define HIVE_ADDR_ia_css_bufq_host_sp_queue 0x5390
 #define HIVE_SIZE_ia_css_bufq_host_sp_queue 2008
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_host_sp_queue scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_host_sp_queue 0x530C
+#define HIVE_ADDR_sp_ia_css_bufq_host_sp_queue 0x5390
 #define HIVE_SIZE_sp_ia_css_bufq_host_sp_queue 2008
 
 /* function thread_fiber_sp_create: D9D */
 
-/* function ia_css_dmaproxy_sp_set_increments: 3702 */
+/* function ia_css_dmaproxy_sp_set_increments: 3707 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_writing_cb_frame
 #define HIVE_MEM_sem_for_writing_cb_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_writing_cb_frame 0x4930
+#define HIVE_ADDR_sem_for_writing_cb_frame 0x49B4
 #define HIVE_SIZE_sem_for_writing_cb_frame 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_writing_cb_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_writing_cb_frame 0x4930
+#define HIVE_ADDR_sp_sem_for_writing_cb_frame 0x49B4
 #define HIVE_SIZE_sp_sem_for_writing_cb_frame 20
 
 /* function receiver_reg_store: AD1 */
@@ -1004,13 +1004,13 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_writing_cb_param
 #define HIVE_MEM_sem_for_writing_cb_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_writing_cb_param 0x4944
+#define HIVE_ADDR_sem_for_writing_cb_param 0x49C8
 #define HIVE_SIZE_sem_for_writing_cb_param 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_writing_cb_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_writing_cb_param 0x4944
+#define HIVE_ADDR_sp_sem_for_writing_cb_param 0x49C8
 #define HIVE_SIZE_sp_sem_for_writing_cb_param 20
 
 /* function sp_start_isp_entry: 453 */
@@ -1021,53 +1021,53 @@ more details.
 #endif
 #define HIVE_ADDR_sp_sp_start_isp_entry 0x453
 
-/* function ia_css_tagger_buf_sp_unmark_all: 2F0C */
+/* function ia_css_tagger_buf_sp_unmark_all: 2F11 */
 
-/* function ia_css_tagger_buf_sp_unmark_from_start: 2F4D */
+/* function ia_css_tagger_buf_sp_unmark_from_start: 2F52 */
 
-/* function ia_css_dmaproxy_sp_channel_acquire: 389C */
+/* function ia_css_dmaproxy_sp_channel_acquire: 38A1 */
 
-/* function ia_css_rmgr_sp_add_num_vbuf: 6838 */
+/* function ia_css_rmgr_sp_add_num_vbuf: 6820 */
 
-/* function ia_css_tagger_frame_in_capture_pipe: 2014 */
+/* function ia_css_tagger_frame_in_capture_pipe: 2019 */
 
-/* function ia_css_isys_sp_token_map_create: 6448 */
+/* function ia_css_isys_sp_token_map_create: 6430 */
 
-/* function __ia_css_dmaproxy_sp_wait_for_ack_text: 3557 */
+/* function __ia_css_dmaproxy_sp_wait_for_ack_text: 355C */
 
-/* function ia_css_tagger_sp_acquire_buf_elem: 2040 */
+/* function ia_css_tagger_sp_acquire_buf_elem: 2045 */
 
-/* function ia_css_bufq_sp_is_dynamic_buffer: 3403 */
+/* function ia_css_bufq_sp_is_dynamic_buffer: 3408 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_group
 #define HIVE_MEM_sp_group scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_group 0x4380
-#define HIVE_SIZE_sp_group 1244
+#define HIVE_ADDR_sp_group 0x43F0
+#define HIVE_SIZE_sp_group 1264
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_group scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_group 0x4380
-#define HIVE_SIZE_sp_sp_group 1244
+#define HIVE_ADDR_sp_sp_group 0x43F0
+#define HIVE_SIZE_sp_sp_group 1264
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_event_proxy_thread
 #define HIVE_MEM_sp_event_proxy_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_event_proxy_thread 0x4B44
+#define HIVE_ADDR_sp_event_proxy_thread 0x4BC8
 #define HIVE_SIZE_sp_event_proxy_thread 72
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_event_proxy_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_event_proxy_thread 0x4B44
+#define HIVE_ADDR_sp_sp_event_proxy_thread 0x4BC8
 #define HIVE_SIZE_sp_sp_event_proxy_thread 72
 
 /* function ia_css_thread_sp_kill: CCB */
 
-/* function ia_css_tagger_sp_create: 2BC0 */
+/* function ia_css_tagger_sp_create: 2BC5 */
 
-/* function tmpmem_acquire_dmem: 68E5 */
+/* function tmpmem_acquire_dmem: 68CD */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_MMU_BASE
@@ -1081,41 +1081,41 @@ more details.
 #define HIVE_ADDR_sp_MMU_BASE 0x24
 #define HIVE_SIZE_sp_MMU_BASE 8
 
-/* function ia_css_dmaproxy_sp_channel_release: 3888 */
+/* function ia_css_dmaproxy_sp_channel_release: 388D */
 
-/* function ia_css_dmaproxy_sp_is_idle: 3868 */
+/* function ia_css_dmaproxy_sp_is_idle: 386D */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_qos_start
 #define HIVE_MEM_sem_for_qos_start scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_qos_start 0x4958
+#define HIVE_ADDR_sem_for_qos_start 0x49DC
 #define HIVE_SIZE_sem_for_qos_start 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_qos_start scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_qos_start 0x4958
+#define HIVE_ADDR_sp_sem_for_qos_start 0x49DC
 #define HIVE_SIZE_sp_sem_for_qos_start 20
 
 /* function isp_hmem_load: B4F */
 
-/* function ia_css_tagger_sp_release_buf_elem: 201C */
+/* function ia_css_tagger_sp_release_buf_elem: 2021 */
 
-/* function ia_css_eventq_sp_send: 38DE */
+/* function ia_css_eventq_sp_send: 38E3 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_isys_sp_error_cnt
 #define HIVE_MEM_ia_css_isys_sp_error_cnt scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_isys_sp_error_cnt 0x64C0
+#define HIVE_ADDR_ia_css_isys_sp_error_cnt 0x6548
 #define HIVE_SIZE_ia_css_isys_sp_error_cnt 16
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_isys_sp_error_cnt scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_isys_sp_error_cnt 0x64C0
+#define HIVE_ADDR_sp_ia_css_isys_sp_error_cnt 0x6548
 #define HIVE_SIZE_sp_ia_css_isys_sp_error_cnt 16
 
-/* function ia_css_tagger_buf_sp_unlock_from_start: 2E3C */
+/* function ia_css_tagger_buf_sp_unlock_from_start: 2E41 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_debug_buffer_ddr_address
@@ -1131,35 +1131,35 @@ more details.
 
 /* function sp_isys_copy_request: 6A8 */
 
-/* function ia_css_rmgr_sp_refcount_retain_vbuf: 66C8 */
+/* function ia_css_rmgr_sp_refcount_retain_vbuf: 66B0 */
 
 /* function ia_css_thread_sp_set_priority: CC3 */
 
 /* function sizeof_hmem: BF6 */
 
-/* function tmpmem_release_dmem: 68D4 */
+/* function tmpmem_release_dmem: 68BC */
 
 /* function cnd_input_system_cfg: 392 */
 
-/* function __ia_css_sp_rawcopy_func_critical: 730B */
+/* function __ia_css_sp_rawcopy_func_critical: 72F3 */
 
-/* function __ia_css_dmaproxy_sp_process_text: 34FB */
+/* function __ia_css_dmaproxy_sp_process_text: 3500 */
 
-/* function ia_css_dmaproxy_sp_set_width_exception: 36ED */
+/* function ia_css_dmaproxy_sp_set_width_exception: 36F2 */
 
 /* function sp_event_assert: 845 */
 
-/* function ia_css_flash_sp_init_internal_params: 3027 */
+/* function ia_css_flash_sp_init_internal_params: 302C */
 
-/* function ia_css_tagger_buf_sp_pop_unmarked_and_unlocked: 2D42 */
+/* function ia_css_tagger_buf_sp_pop_unmarked_and_unlocked: 2D47 */
 
-/* function __modu: 6C77 */
+/* function __modu: 6C5F */
 
-/* function ia_css_dmaproxy_sp_init_isp_vector: 355D */
+/* function ia_css_dmaproxy_sp_init_isp_vector: 3562 */
 
 /* function isp_vamem_store: 0 */
 
-/* function ia_css_tagger_sp_set_copy_pipe: 2BB7 */
+/* function ia_css_tagger_sp_set_copy_pipe: 2BBC */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_GDC_BASE
@@ -1173,22 +1173,22 @@ more details.
 #define HIVE_ADDR_sp_GDC_BASE 0x44
 #define HIVE_SIZE_sp_GDC_BASE 8
 
-/* function ia_css_queue_local_init: 506D */
+/* function ia_css_queue_local_init: 5074 */
 
-/* function sp_event_proxy_callout_func: 6D44 */
+/* function sp_event_proxy_callout_func: 6D2C */
 
-/* function qos_scheduler_schedule_stage: 6958 */
+/* function qos_scheduler_schedule_stage: 6940 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_thread_sp_num_ready_threads
 #define HIVE_MEM_ia_css_thread_sp_num_ready_threads scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_thread_sp_num_ready_threads 0x4BD4
+#define HIVE_ADDR_ia_css_thread_sp_num_ready_threads 0x4C58
 #define HIVE_SIZE_ia_css_thread_sp_num_ready_threads 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_thread_sp_num_ready_threads scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_thread_sp_num_ready_threads 0x4BD4
+#define HIVE_ADDR_sp_ia_css_thread_sp_num_ready_threads 0x4C58
 #define HIVE_SIZE_sp_ia_css_thread_sp_num_ready_threads 4
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -1203,31 +1203,31 @@ more details.
 #define HIVE_ADDR_sp_sp_threads_stack_size 0x180
 #define HIVE_SIZE_sp_sp_threads_stack_size 28
 
-/* function ia_css_ispctrl_sp_isp_done_row_striping: 436C */
+/* function ia_css_ispctrl_sp_isp_done_row_striping: 4373 */
 
-/* function __ia_css_isys_sp_isr_text: 618D */
+/* function __ia_css_isys_sp_isr_text: 6175 */
 
-/* function ia_css_queue_dequeue: 4EEB */
+/* function ia_css_queue_dequeue: 4EF2 */
 
-/* function is_qos_standalone_mode: 6933 */
+/* function is_qos_standalone_mode: 691B */
 
-/* function ia_css_dmaproxy_sp_configure_channel: 71D9 */
+/* function ia_css_dmaproxy_sp_configure_channel: 71C1 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_current_thread_fiber_sp
 #define HIVE_MEM_current_thread_fiber_sp scalar_processor_2400_dmem
-#define HIVE_ADDR_current_thread_fiber_sp 0x4BD8
+#define HIVE_ADDR_current_thread_fiber_sp 0x4C5C
 #define HIVE_SIZE_current_thread_fiber_sp 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_current_thread_fiber_sp scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_current_thread_fiber_sp 0x4BD8
+#define HIVE_ADDR_sp_current_thread_fiber_sp 0x4C5C
 #define HIVE_SIZE_sp_current_thread_fiber_sp 4
 
 /* function ia_css_circbuf_pop: FCD */
 
-/* function memset: 6CF6 */
+/* function memset: 6CDE */
 
 /* function irq_raise_set_token: B6 */
 
@@ -1243,38 +1243,38 @@ more details.
 #define HIVE_ADDR_sp_GPIO_BASE 0x3C
 #define HIVE_SIZE_sp_GPIO_BASE 4
 
-/* function ia_css_pipeline_acc_stage_enable: 180D */
+/* function ia_css_pipeline_acc_stage_enable: 1811 */
 
-/* function ia_css_tagger_sp_unlock_exp_id: 208D */
+/* function ia_css_tagger_sp_unlock_exp_id: 2092 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_isp_ph
 #define HIVE_MEM_isp_ph scalar_processor_2400_dmem
-#define HIVE_ADDR_isp_ph 0x64D0
+#define HIVE_ADDR_isp_ph 0x6558
 #define HIVE_SIZE_isp_ph 28
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_isp_ph scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_ph 0x64D0
+#define HIVE_ADDR_sp_isp_ph 0x6558
 #define HIVE_SIZE_sp_isp_ph 28
 
-/* function ia_css_isys_sp_token_map_flush: 638D */
+/* function ia_css_isys_sp_token_map_flush: 6375 */
 
-/* function ia_css_ispctrl_sp_init_ds: 3BD6 */
+/* function ia_css_ispctrl_sp_init_ds: 3BDB */
 
-/* function get_xmem_base_addr_raw: 3F91 */
+/* function get_xmem_base_addr_raw: 3F96 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cbs_param
 #define HIVE_MEM_sp_all_cbs_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_all_cbs_param 0x496C
+#define HIVE_ADDR_sp_all_cbs_param 0x49F0
 #define HIVE_SIZE_sp_all_cbs_param 16
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_all_cbs_param scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_all_cbs_param 0x496C
+#define HIVE_ADDR_sp_sp_all_cbs_param 0x49F0
 #define HIVE_SIZE_sp_sp_all_cbs_param 16
 
 /* function ia_css_circbuf_create: 101B */
@@ -1282,46 +1282,46 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_sp_group
 #define HIVE_MEM_sem_for_sp_group scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_sp_group 0x497C
+#define HIVE_ADDR_sem_for_sp_group 0x4A00
 #define HIVE_SIZE_sem_for_sp_group 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_sp_group scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_sp_group 0x497C
+#define HIVE_ADDR_sp_sem_for_sp_group 0x4A00
 #define HIVE_SIZE_sp_sem_for_sp_group 20
 
-/* function __ia_css_dmaproxy_sp_configure_channel_text: 36CC */
+/* function __ia_css_dmaproxy_sp_configure_channel_text: 36D1 */
 
-/* function ia_css_framebuf_sp_wait_for_in_frame: 6863 */
+/* function ia_css_framebuf_sp_wait_for_in_frame: 684B */
 
-/* function ia_css_sp_rawcopy_tag_frame: 59ED */
+/* function ia_css_sp_rawcopy_tag_frame: 59D5 */
 
 /* function isp_hmem_clear: B1F */
 
-/* function ia_css_framebuf_sp_release_in_frame: 68A6 */
+/* function ia_css_framebuf_sp_release_in_frame: 688E */
 
-/* function ia_css_isys_sp_backend_snd_acquire_request: 5DE3 */
+/* function ia_css_isys_sp_backend_snd_acquire_request: 5DCB */
 
-/* function ia_css_isys_sp_token_map_is_full: 6214 */
+/* function ia_css_isys_sp_token_map_is_full: 61FC */
 
 /* function input_system_acquisition_run: AF3 */
 
-/* function ia_css_ispctrl_sp_start_binary: 3A28 */
+/* function ia_css_ispctrl_sp_start_binary: 3A2D */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_h_pipe_private_ddr_ptrs
 #define HIVE_MEM_ia_css_bufq_sp_h_pipe_private_ddr_ptrs scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_h_pipe_private_ddr_ptrs 0x5AE4
+#define HIVE_ADDR_ia_css_bufq_sp_h_pipe_private_ddr_ptrs 0x5B68
 #define HIVE_SIZE_ia_css_bufq_sp_h_pipe_private_ddr_ptrs 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_h_pipe_private_ddr_ptrs scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_h_pipe_private_ddr_ptrs 0x5AE4
+#define HIVE_ADDR_sp_ia_css_bufq_sp_h_pipe_private_ddr_ptrs 0x5B68
 #define HIVE_SIZE_sp_ia_css_bufq_sp_h_pipe_private_ddr_ptrs 20
 
-/* function ia_css_eventq_sp_recv: 38B0 */
+/* function ia_css_eventq_sp_recv: 38B5 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_isp_pool
@@ -1335,11 +1335,11 @@ more details.
 #define HIVE_ADDR_sp_isp_pool 0x308
 #define HIVE_SIZE_sp_isp_pool 4
 
-/* function ia_css_rmgr_sp_rel_gen: 6595 */
+/* function ia_css_rmgr_sp_rel_gen: 657D */
 
-/* function ia_css_tagger_sp_unblock_clients: 2A2C */
+/* function ia_css_tagger_sp_unblock_clients: 2A31 */
 
-/* function css_get_frame_processing_time_end: 2004 */
+/* function css_get_frame_processing_time_end: 2009 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_event_any_pending_mask
@@ -1353,15 +1353,15 @@ more details.
 #define HIVE_ADDR_sp_event_any_pending_mask 0x320
 #define HIVE_SIZE_sp_event_any_pending_mask 8
 
-/* function ia_css_isys_sp_backend_push: 5D9A */
+/* function ia_css_isys_sp_backend_push: 5D82 */
 
 /* function sh_css_decode_tag_descr: 352 */
 
 /* function debug_enqueue_isp: 27B */
 
-/* function qos_scheduler_update_stage_budget: 693B */
+/* function qos_scheduler_update_stage_budget: 6923 */
 
-/* function ia_css_spctrl_sp_uninit: 5CD5 */
+/* function ia_css_spctrl_sp_uninit: 5CBD */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_HIVE_IF_SWITCH_CODE
@@ -1378,36 +1378,36 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_dis_bufs
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_dis_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_dis_bufs 0x5AF8
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_dis_bufs 0x5B7C
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_dis_bufs 140
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_dis_bufs scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_dis_bufs 0x5AF8
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_dis_bufs 0x5B7C
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_dis_bufs 140
 
-/* function ia_css_tagger_buf_sp_lock_from_start: 2E70 */
+/* function ia_css_tagger_buf_sp_lock_from_start: 2E75 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_isp_idle
 #define HIVE_MEM_sem_for_isp_idle scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_isp_idle 0x4990
+#define HIVE_ADDR_sem_for_isp_idle 0x4A14
 #define HIVE_SIZE_sem_for_isp_idle 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_isp_idle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_isp_idle 0x4990
+#define HIVE_ADDR_sp_sem_for_isp_idle 0x4A14
 #define HIVE_SIZE_sp_sem_for_isp_idle 20
 
-/* function ia_css_dmaproxy_sp_write_byte_addr: 35BA */
+/* function ia_css_dmaproxy_sp_write_byte_addr: 35BF */
 
-/* function ia_css_dmaproxy_sp_init: 3531 */
+/* function ia_css_dmaproxy_sp_init: 3536 */
 
-/* function ia_css_bufq_sp_release_dynamic_buf_clock_tick: 30F9 */
+/* function ia_css_bufq_sp_release_dynamic_buf_clock_tick: 30FE */
 
-/* function ia_css_tagger_buf_sp_set_capture_from_start: 2C43 */
+/* function ia_css_tagger_buf_sp_set_capture_from_start: 2C48 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ISP_VAMEM_BASE
@@ -1424,32 +1424,32 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_rawcopy_sp_tagger
 #define HIVE_MEM_ia_css_rawcopy_sp_tagger scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_rawcopy_sp_tagger 0x6480
+#define HIVE_ADDR_ia_css_rawcopy_sp_tagger 0x6508
 #define HIVE_SIZE_ia_css_rawcopy_sp_tagger 24
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_rawcopy_sp_tagger scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_rawcopy_sp_tagger 0x6480
+#define HIVE_ADDR_sp_ia_css_rawcopy_sp_tagger 0x6508
 #define HIVE_SIZE_sp_ia_css_rawcopy_sp_tagger 24
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_exp_ids
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_exp_ids scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_exp_ids 0x5B84
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_exp_ids 0x5C08
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_exp_ids 70
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_exp_ids scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_exp_ids 0x5B84
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_exp_ids 0x5C08
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_exp_ids 70
 
-/* function ia_css_queue_item_load: 515F */
+/* function ia_css_queue_item_load: 5166 */
 
-/* function ia_css_spctrl_sp_get_state: 5CC0 */
+/* function ia_css_spctrl_sp_get_state: 5CA8 */
 
-/* function ia_css_isys_sp_token_map_uninit: 63AA */
+/* function ia_css_isys_sp_token_map_uninit: 6392 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_callout_sp_thread
@@ -1477,53 +1477,53 @@ more details.
 #define HIVE_ADDR_sp_SP_PMEM_BASE 0x0
 #define HIVE_SIZE_sp_SP_PMEM_BASE 4
 
-/* function ia_css_isys_sp_token_map_snd_acquire_req: 631A */
+/* function ia_css_isys_sp_token_map_snd_acquire_req: 6302 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_isp_input_stream_format
 #define HIVE_MEM_sp_isp_input_stream_format scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_input_stream_format 0x4270
+#define HIVE_ADDR_sp_isp_input_stream_format 0x42E0
 #define HIVE_SIZE_sp_isp_input_stream_format 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_isp_input_stream_format scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_isp_input_stream_format 0x4270
+#define HIVE_ADDR_sp_sp_isp_input_stream_format 0x42E0
 #define HIVE_SIZE_sp_sp_isp_input_stream_format 20
 
-/* function __mod: 6C63 */
+/* function __mod: 6C4B */
 
-/* function ia_css_dmaproxy_sp_init_dmem_channel: 361B */
+/* function ia_css_dmaproxy_sp_init_dmem_channel: 3620 */
 
 /* function ia_css_thread_sp_join: CF4 */
 
-/* function ia_css_dmaproxy_sp_add_command: 72CB */
+/* function ia_css_dmaproxy_sp_add_command: 72B3 */
 
-/* function ia_css_sp_metadata_thread_func: 5B98 */
+/* function ia_css_sp_metadata_thread_func: 5B80 */
 
-/* function __sp_event_proxy_func_critical: 6D31 */
+/* function __sp_event_proxy_func_critical: 6D19 */
 
-/* function ia_css_sp_metadata_wait: 5C87 */
+/* function ia_css_sp_metadata_wait: 5C6F */
 
 /* function ia_css_circbuf_peek_from_start: EFD */
 
-/* function ia_css_event_sp_encode: 393B */
+/* function ia_css_event_sp_encode: 3940 */
 
 /* function ia_css_thread_sp_run: D67 */
 
 /* function sp_isys_copy_func: 68A */
 
-/* function ia_css_isys_sp_backend_flush: 5E03 */
+/* function ia_css_isys_sp_backend_flush: 5DEB */
 
-/* function ia_css_isys_sp_backend_frame_exists: 5D1F */
+/* function ia_css_isys_sp_backend_frame_exists: 5D07 */
 
-/* function ia_css_sp_isp_param_init_isp_memories: 4C12 */
+/* function ia_css_sp_isp_param_init_isp_memories: 4C19 */
 
 /* function register_isr: 83D */
 
 /* function irq_raise: C8 */
 
-/* function ia_css_dmaproxy_sp_mmu_invalidate: 34C1 */
+/* function ia_css_dmaproxy_sp_mmu_invalidate: 34C6 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_HIVE_IF_SRST_ADDRESS
@@ -1537,27 +1537,27 @@ more details.
 #define HIVE_ADDR_sp_HIVE_IF_SRST_ADDRESS 0x1B8
 #define HIVE_SIZE_sp_HIVE_IF_SRST_ADDRESS 16
 
-/* function pipeline_sp_initialize_stage: 1953 */
+/* function pipeline_sp_initialize_stage: 1957 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_isys_sp_frontend_states
 #define HIVE_MEM_ia_css_isys_sp_frontend_states scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_isys_sp_frontend_states 0x64B4
+#define HIVE_ADDR_ia_css_isys_sp_frontend_states 0x653C
 #define HIVE_SIZE_ia_css_isys_sp_frontend_states 12
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_isys_sp_frontend_states scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_isys_sp_frontend_states 0x64B4
+#define HIVE_ADDR_sp_ia_css_isys_sp_frontend_states 0x653C
 #define HIVE_SIZE_sp_ia_css_isys_sp_frontend_states 12
 
-/* function ia_css_dmaproxy_sp_read_byte_addr_mmio: 71AB */
+/* function ia_css_dmaproxy_sp_read_byte_addr_mmio: 7193 */
 
-/* function ia_css_ispctrl_sp_done_ds: 3BBD */
+/* function ia_css_ispctrl_sp_done_ds: 3BC2 */
 
-/* function ia_css_sp_isp_param_get_mem_inits: 4BED */
+/* function ia_css_sp_isp_param_get_mem_inits: 4BF4 */
 
-/* function ia_css_parambuf_sp_init_buffer_queues: 13F1 */
+/* function ia_css_parambuf_sp_init_buffer_queues: 13F3 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_vbuf_pfp_spref
@@ -1588,122 +1588,122 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_frames
 #define HIVE_MEM_ia_css_bufq_sp_pipe_private_frames scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_frames 0x5BCC
+#define HIVE_ADDR_ia_css_bufq_sp_pipe_private_frames 0x5C50
 #define HIVE_SIZE_ia_css_bufq_sp_pipe_private_frames 280
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_pipe_private_frames scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_frames 0x5BCC
+#define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_frames 0x5C50
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_frames 280
 
-/* function qos_scheduler_init_stage_budget: 6999 */
+/* function qos_scheduler_init_stage_budget: 6981 */
 
-/* function ia_css_isys_sp_backend_release: 5E78 */
+/* function ia_css_isys_sp_backend_release: 5E60 */
 
-/* function ia_css_isys_sp_backend_destroy: 5EA2 */
+/* function ia_css_isys_sp_backend_destroy: 5E8A */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp2host_buffer_queue_handle
 #define HIVE_MEM_sp2host_buffer_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp2host_buffer_queue_handle 0x5CE4
+#define HIVE_ADDR_sp2host_buffer_queue_handle 0x5D68
 #define HIVE_SIZE_sp2host_buffer_queue_handle 96
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp2host_buffer_queue_handle scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp2host_buffer_queue_handle 0x5CE4
+#define HIVE_ADDR_sp_sp2host_buffer_queue_handle 0x5D68
 #define HIVE_SIZE_sp_sp2host_buffer_queue_handle 96
 
-/* function ia_css_isys_sp_token_map_check_mipi_frame_size: 62DE */
+/* function ia_css_isys_sp_token_map_check_mipi_frame_size: 62C6 */
 
-/* function ia_css_ispctrl_sp_init_isp_vars: 48DF */
+/* function ia_css_ispctrl_sp_init_isp_vars: 48E6 */
 
-/* function ia_css_isys_sp_frontend_has_empty_mipi_buffer_cb: 5EF4 */
+/* function ia_css_isys_sp_frontend_has_empty_mipi_buffer_cb: 5EDC */
 
 /* function sp_warning: 870 */
 
-/* function ia_css_rmgr_sp_vbuf_enqueue: 6688 */
+/* function ia_css_rmgr_sp_vbuf_enqueue: 6670 */
 
-/* function ia_css_tagger_sp_tag_exp_id: 21C2 */
+/* function ia_css_tagger_sp_tag_exp_id: 21C7 */
 
-/* function ia_css_dmaproxy_sp_write: 35D1 */
+/* function ia_css_dmaproxy_sp_write: 35D6 */
 
-/* function ia_css_parambuf_sp_release_in_param: 1245 */
+/* function ia_css_parambuf_sp_release_in_param: 1247 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_irq_sw_interrupt_token
 #define HIVE_MEM_irq_sw_interrupt_token scalar_processor_2400_dmem
-#define HIVE_ADDR_irq_sw_interrupt_token 0x426C
+#define HIVE_ADDR_irq_sw_interrupt_token 0x42DC
 #define HIVE_SIZE_irq_sw_interrupt_token 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_irq_sw_interrupt_token scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_irq_sw_interrupt_token 0x426C
+#define HIVE_ADDR_sp_irq_sw_interrupt_token 0x42DC
 #define HIVE_SIZE_sp_irq_sw_interrupt_token 4
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_isp_addresses
 #define HIVE_MEM_sp_isp_addresses scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_addresses 0x6134
+#define HIVE_ADDR_sp_isp_addresses 0x61BC
 #define HIVE_SIZE_sp_isp_addresses 172
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_isp_addresses scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_isp_addresses 0x6134
+#define HIVE_ADDR_sp_sp_isp_addresses 0x61BC
 #define HIVE_SIZE_sp_sp_isp_addresses 172
 
-/* function ia_css_rmgr_sp_acq_gen: 65AD */
+/* function ia_css_rmgr_sp_acq_gen: 6595 */
 
 /* function receiver_reg_load: ACA */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_isps
 #define HIVE_MEM_isps scalar_processor_2400_dmem
-#define HIVE_ADDR_isps 0x64EC
+#define HIVE_ADDR_isps 0x6574
 #define HIVE_SIZE_isps 28
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_isps scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isps 0x64EC
+#define HIVE_ADDR_sp_isps 0x6574
 #define HIVE_SIZE_sp_isps 28
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host_sp_queues_initialized
 #define HIVE_MEM_host_sp_queues_initialized scalar_processor_2400_dmem
-#define HIVE_ADDR_host_sp_queues_initialized 0x4284
+#define HIVE_ADDR_host_sp_queues_initialized 0x42F4
 #define HIVE_SIZE_host_sp_queues_initialized 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_host_sp_queues_initialized scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_host_sp_queues_initialized 0x4284
+#define HIVE_ADDR_sp_host_sp_queues_initialized 0x42F4
 #define HIVE_SIZE_sp_host_sp_queues_initialized 4
 
-/* function ia_css_queue_uninit: 502B */
+/* function ia_css_queue_uninit: 5032 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_ispctrl_sp_isp_started
 #define HIVE_MEM_ia_css_ispctrl_sp_isp_started scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_ispctrl_sp_isp_started 0x5DEC
+#define HIVE_ADDR_ia_css_ispctrl_sp_isp_started 0x5E70
 #define HIVE_SIZE_ia_css_ispctrl_sp_isp_started 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_ispctrl_sp_isp_started scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_ispctrl_sp_isp_started 0x5DEC
+#define HIVE_ADDR_sp_ia_css_ispctrl_sp_isp_started 0x5E70
 #define HIVE_SIZE_sp_ia_css_ispctrl_sp_isp_started 4
 
-/* function ia_css_bufq_sp_release_dynamic_buf: 3165 */
+/* function ia_css_bufq_sp_release_dynamic_buf: 316A */
 
-/* function ia_css_dmaproxy_sp_set_height_exception: 36DE */
+/* function ia_css_dmaproxy_sp_set_height_exception: 36E3 */
 
-/* function ia_css_dmaproxy_sp_init_vmem_channel: 364F */
+/* function ia_css_dmaproxy_sp_init_vmem_channel: 3654 */
 
-/* function ia_css_dmaproxy_sp_write_byte_addr_mmio: 35A3 */
+/* function ia_css_dmaproxy_sp_write_byte_addr_mmio: 35A8 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_vbuf_spref
@@ -1720,66 +1720,66 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_metadata_thread
 #define HIVE_MEM_sp_metadata_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_metadata_thread 0x4B8C
+#define HIVE_ADDR_sp_metadata_thread 0x4C10
 #define HIVE_SIZE_sp_metadata_thread 72
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_metadata_thread scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_metadata_thread 0x4B8C
+#define HIVE_ADDR_sp_sp_metadata_thread 0x4C10
 #define HIVE_SIZE_sp_sp_metadata_thread 72
 
-/* function ia_css_queue_enqueue: 4F75 */
+/* function ia_css_queue_enqueue: 4F7C */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_flash_sp_request
 #define HIVE_MEM_ia_css_flash_sp_request scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_flash_sp_request 0x4C88
+#define HIVE_ADDR_ia_css_flash_sp_request 0x4D0C
 #define HIVE_SIZE_ia_css_flash_sp_request 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_flash_sp_request scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_flash_sp_request 0x4C88
+#define HIVE_ADDR_sp_ia_css_flash_sp_request 0x4D0C
 #define HIVE_SIZE_sp_ia_css_flash_sp_request 4
 
-/* function ia_css_dmaproxy_sp_vmem_write: 3574 */
+/* function ia_css_dmaproxy_sp_vmem_write: 3579 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_tagger_frames
 #define HIVE_MEM_tagger_frames scalar_processor_2400_dmem
-#define HIVE_ADDR_tagger_frames 0x4BDC
+#define HIVE_ADDR_tagger_frames 0x4C60
 #define HIVE_SIZE_tagger_frames 168
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_tagger_frames scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_tagger_frames 0x4BDC
+#define HIVE_ADDR_sp_tagger_frames 0x4C60
 #define HIVE_SIZE_sp_tagger_frames 168
 
-/* function ia_css_isys_sp_token_map_snd_capture_req: 633C */
+/* function ia_css_isys_sp_token_map_snd_capture_req: 6324 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_reading_if
 #define HIVE_MEM_sem_for_reading_if scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_reading_if 0x49A4
+#define HIVE_ADDR_sem_for_reading_if 0x4A28
 #define HIVE_SIZE_sem_for_reading_if 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_reading_if scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_reading_if 0x49A4
+#define HIVE_ADDR_sp_sem_for_reading_if 0x4A28
 #define HIVE_SIZE_sp_sem_for_reading_if 20
 
 /* function sp_generate_interrupts: 8EF */
 
-/* function ia_css_pipeline_sp_start: 1866 */
+/* function ia_css_pipeline_sp_start: 186A */
 
-/* function ia_css_thread_default_callout: 6E2C */
+/* function ia_css_thread_default_callout: 6E14 */
 
-/* function ia_css_sp_rawcopy_init: 5567 */
+/* function ia_css_sp_rawcopy_init: 554F */
 
-/* function tmr_clock_read: 691A */
+/* function tmr_clock_read: 6902 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ISP_BAMEM_BASE
@@ -1793,32 +1793,32 @@ more details.
 #define HIVE_ADDR_sp_ISP_BAMEM_BASE 0x318
 #define HIVE_SIZE_sp_ISP_BAMEM_BASE 4
 
-/* function ia_css_isys_sp_frontend_rcv_capture_ack: 5FA3 */
+/* function ia_css_isys_sp_frontend_rcv_capture_ack: 5F8B */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_sems_for_sp2host_buf_queues
 #define HIVE_MEM_ia_css_bufq_sp_sems_for_sp2host_buf_queues scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_bufq_sp_sems_for_sp2host_buf_queues 0x5D44
+#define HIVE_ADDR_ia_css_bufq_sp_sems_for_sp2host_buf_queues 0x5DC8
 #define HIVE_SIZE_ia_css_bufq_sp_sems_for_sp2host_buf_queues 160
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_bufq_sp_sems_for_sp2host_buf_queues scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_bufq_sp_sems_for_sp2host_buf_queues 0x5D44
+#define HIVE_ADDR_sp_ia_css_bufq_sp_sems_for_sp2host_buf_queues 0x5DC8
 #define HIVE_SIZE_sp_ia_css_bufq_sp_sems_for_sp2host_buf_queues 160
 
-/* function css_get_frame_processing_time_start: 200C */
+/* function css_get_frame_processing_time_start: 2011 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cbs_frame
 #define HIVE_MEM_sp_all_cbs_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_all_cbs_frame 0x49B8
+#define HIVE_ADDR_sp_all_cbs_frame 0x4A3C
 #define HIVE_SIZE_sp_all_cbs_frame 16
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_all_cbs_frame scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_all_cbs_frame 0x49B8
+#define HIVE_ADDR_sp_sp_all_cbs_frame 0x4A3C
 #define HIVE_SIZE_sp_sp_all_cbs_frame 16
 
 /* function thread_sp_queue_print: D84 */
@@ -1828,18 +1828,18 @@ more details.
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_str2mem
 #define HIVE_MEM_sem_for_str2mem scalar_processor_2400_dmem
-#define HIVE_ADDR_sem_for_str2mem 0x49C8
+#define HIVE_ADDR_sem_for_str2mem 0x4A4C
 #define HIVE_SIZE_sem_for_str2mem 20
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sem_for_str2mem scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sem_for_str2mem 0x49C8
+#define HIVE_ADDR_sp_sem_for_str2mem 0x4A4C
 #define HIVE_SIZE_sp_sem_for_str2mem 20
 
-/* function ia_css_tagger_buf_sp_is_marked_from_start: 2ED8 */
+/* function ia_css_tagger_buf_sp_is_marked_from_start: 2EDD */
 
-/* function ia_css_bufq_sp_acquire_dynamic_buf: 331D */
+/* function ia_css_bufq_sp_acquire_dynamic_buf: 3322 */
 
 /* function ia_css_circbuf_destroy: 1012 */
 
@@ -1855,43 +1855,43 @@ more details.
 #define HIVE_ADDR_sp_ISP_PMEM_BASE 0xC
 #define HIVE_SIZE_sp_ISP_PMEM_BASE 4
 
-/* function ia_css_sp_isp_param_mem_load: 4B80 */
+/* function ia_css_sp_isp_param_mem_load: 4B87 */
 
-/* function ia_css_tagger_buf_sp_pop_from_start: 2CC4 */
+/* function ia_css_tagger_buf_sp_pop_from_start: 2CC9 */
 
-/* function __div: 6C1B */
+/* function __div: 6C03 */
 
-/* function ia_css_isys_sp_frontend_create: 6174 */
+/* function ia_css_isys_sp_frontend_create: 615C */
 
-/* function ia_css_rmgr_sp_refcount_release_vbuf: 66A7 */
+/* function ia_css_rmgr_sp_refcount_release_vbuf: 668F */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_flash_sp_in_use
 #define HIVE_MEM_ia_css_flash_sp_in_use scalar_processor_2400_dmem
-#define HIVE_ADDR_ia_css_flash_sp_in_use 0x4C8C
+#define HIVE_ADDR_ia_css_flash_sp_in_use 0x4D10
 #define HIVE_SIZE_ia_css_flash_sp_in_use 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_ia_css_flash_sp_in_use scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_ia_css_flash_sp_in_use 0x4C8C
+#define HIVE_ADDR_sp_ia_css_flash_sp_in_use 0x4D10
 #define HIVE_SIZE_sp_ia_css_flash_sp_in_use 4
 
-/* function ia_css_thread_sem_sp_wait: 6F00 */
+/* function ia_css_thread_sem_sp_wait: 6EE8 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_sleep_mode
 #define HIVE_MEM_sp_sleep_mode scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sleep_mode 0x4288
+#define HIVE_ADDR_sp_sleep_mode 0x42F8
 #define HIVE_SIZE_sp_sleep_mode 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_sp_sleep_mode scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_sp_sleep_mode 0x4288
+#define HIVE_ADDR_sp_sp_sleep_mode 0x42F8
 #define HIVE_SIZE_sp_sp_sleep_mode 4
 
-/* function ia_css_tagger_buf_sp_push: 2DD3 */
+/* function ia_css_tagger_buf_sp_push: 2DD8 */
 
 /* function mmu_invalidate_cache: D3 */
 
@@ -1907,18 +1907,18 @@ more details.
 #define HIVE_ADDR_sp_sp_max_cb_elems 0x148
 #define HIVE_SIZE_sp_sp_max_cb_elems 8
 
-/* function ia_css_queue_remote_init: 504D */
+/* function ia_css_queue_remote_init: 5054 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_isp_stop_req
 #define HIVE_MEM_isp_stop_req scalar_processor_2400_dmem
-#define HIVE_ADDR_isp_stop_req 0x485C
+#define HIVE_ADDR_isp_stop_req 0x48E0
 #define HIVE_SIZE_isp_stop_req 4
 #else
 #endif
 #endif
 #define HIVE_MEM_sp_isp_stop_req scalar_processor_2400_dmem
-#define HIVE_ADDR_sp_isp_stop_req 0x485C
+#define HIVE_ADDR_sp_isp_stop_req 0x48E0
 #define HIVE_SIZE_sp_isp_stop_req 4
 
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.c
index 70bf169..418a933 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.c
@@ -446,6 +446,56 @@ size);
 /* Code generated by genparam/gencode.c:gen_process_function() */
 
 static void
+ia_css_process_tdf(
+	unsigned pipe_id,
+	const struct ia_css_pipeline_stage *stage,
+	struct ia_css_isp_parameters *params)
+{
+	assert(params != NULL);
+
+	{
+		unsigned size   = stage->binary->info->mem_offsets.offsets.param->vmem.tdf.size;
+
+		unsigned offset = stage->binary->info->mem_offsets.offsets.param->vmem.tdf.offset;
+
+		if (size) {
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() enter:\n");
+
+			ia_css_tdf_vmem_encode((struct tdf_vmem_params *)
+					&stage->binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_VMEM].address[offset],
+					&params->tdf_config,
+size);
+			params->isp_params_changed = true;
+			params->isp_mem_params_changed[pipe_id][stage->stage_num][IA_CSS_ISP_VMEM] = true;
+
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() leave:\n");
+		}
+
+	}
+	{
+		unsigned size   = stage->binary->info->mem_offsets.offsets.param->dmem.tdf.size;
+
+		unsigned offset = stage->binary->info->mem_offsets.offsets.param->dmem.tdf.offset;
+
+		if (size) {
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() enter:\n");
+
+			ia_css_tdf_encode((struct tdf_dmem_params *)
+					&stage->binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset],
+					&params->tdf_config,
+size);
+			params->isp_params_changed = true;
+			params->isp_mem_params_changed[pipe_id][stage->stage_num][IA_CSS_ISP_DMEM] = true;
+
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() leave:\n");
+		}
+
+	}
+}
+
+/* Code generated by genparam/gencode.c:gen_process_function() */
+
+static void
 ia_css_process_eed1_8(
 	unsigned pipe_id,
 	const struct ia_css_pipeline_stage *stage,
@@ -1964,6 +2014,7 @@ void (* ia_css_kernel_process_param[IA_CSS_NUM_PARAMETER_IDS])(
 	ia_css_process_bnr,
 	ia_css_process_dpc2,
 	ia_css_process_bnlm,
+	ia_css_process_tdf,
 	ia_css_process_eed1_8,
 	ia_css_process_de,
 	ia_css_process_ecd,
@@ -2120,6 +2171,42 @@ ia_css_set_bnlm_config(struct ia_css_isp_parameters *params,
 /* Code generated by genparam/gencode.c:gen_get_function() */
 
 static void
+ia_css_get_tdf_config(const struct ia_css_isp_parameters *params,
+			struct ia_css_tdf_config *config){
+	if (config == NULL)
+		return;
+
+	assert(params != NULL);
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_get_tdf_config() enter: "
+		"config=%p\n",config);
+
+	*config = params->tdf_config;
+
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_get_tdf_config() leave\n");
+	ia_css_tdf_debug_dtrace(config, IA_CSS_DEBUG_TRACE);
+}
+
+/* Code generated by genparam/gencode.c:gen_set_function() */
+
+void
+ia_css_set_tdf_config(struct ia_css_isp_parameters *params,
+			const struct ia_css_tdf_config *config)
+{
+	if (config == NULL)
+		return;
+
+	assert(params != NULL);
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE, "ia_css_set_tdf_config() enter:\n");
+	ia_css_tdf_debug_dtrace(config, IA_CSS_DEBUG_TRACE);
+	params->tdf_config = *config;
+	params->config_changed[IA_CSS_TDF_ID] = true;
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_set_tdf_config() leave: "
+		"return_void\n");
+}
+
+/* Code generated by genparam/gencode.c:gen_get_function() */
+
+static void
 ia_css_get_eed1_8_config(const struct ia_css_isp_parameters *params,
 			struct ia_css_eed1_8_config *config){
 	if (config == NULL)
@@ -3664,6 +3751,7 @@ ia_css_get_configs(struct ia_css_isp_parameters *params,
 	ia_css_get_dp_config(params, config->dp_config);
 	ia_css_get_dpc2_config(params, config->dpc2_config);
 	ia_css_get_bnlm_config(params, config->bnlm_config);
+	ia_css_get_tdf_config(params, config->tdf_config);
 	ia_css_get_eed1_8_config(params, config->eed1_8_config);
 	ia_css_get_wb_config(params, config->wb_config);
 	ia_css_get_tnr_config(params, config->tnr_config);
@@ -3717,6 +3805,7 @@ ia_css_set_configs(struct ia_css_isp_parameters *params,
 	ia_css_set_dp_config(params, config->dp_config);
 	ia_css_set_dpc2_config(params, config->dpc2_config);
 	ia_css_set_bnlm_config(params, config->bnlm_config);
+	ia_css_set_tdf_config(params, config->tdf_config);
 	ia_css_set_eed1_8_config(params, config->eed1_8_config);
 	ia_css_set_wb_config(params, config->wb_config);
 	ia_css_set_tnr_config(params, config->tnr_config);
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.h
index 2b971c8..3ab1013 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/hive_isp_css_2401_system_csi2p_generated/ia_css_isp_params.h
@@ -30,6 +30,7 @@ enum ia_css_parameter_ids {
 	IA_CSS_BNR_ID,
 	IA_CSS_DPC2_ID,
 	IA_CSS_BNLM_ID,
+	IA_CSS_TDF_ID,
 	IA_CSS_EED1_8_ID,
 	IA_CSS_DE_ID,
 	IA_CSS_ECD_ID,
@@ -90,6 +91,7 @@ struct ia_css_memory_offsets {
 		struct ia_css_isp_parameter bnr;
 		struct ia_css_isp_parameter dpc2;
 		struct ia_css_isp_parameter bnlm;
+		struct ia_css_isp_parameter tdf;
 		struct ia_css_isp_parameter eed1_8;
 		struct ia_css_isp_parameter de;
 		struct ia_css_isp_parameter ecd;
@@ -132,6 +134,7 @@ struct ia_css_memory_offsets {
 	struct {
 		struct ia_css_isp_parameter anr2;
 		struct ia_css_isp_parameter bnlm;
+		struct ia_css_isp_parameter tdf;
 		struct ia_css_isp_parameter eed1_8;
 		struct ia_css_isp_parameter ob;
 		struct ia_css_isp_parameter macc1_5;
@@ -195,6 +198,12 @@ ia_css_set_bnlm_config(struct ia_css_isp_parameters *params,
 /* Code generated by genparam/gencode.c:gen_set_function() */
 
 void
+ia_css_set_tdf_config(struct ia_css_isp_parameters *params,
+			const struct ia_css_tdf_config *config);
+
+/* Code generated by genparam/gencode.c:gen_set_function() */
+
+void
 ia_css_set_eed1_8_config(struct ia_css_isp_parameters *params,
 			const struct ia_css_eed1_8_config *config);
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/spmem_dump.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/spmem_dump.c
index 554da12..76ca3df 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/spmem_dump.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_csi2p_system/spmem_dump.c
@@ -21,9 +21,9 @@ more details.
 
 #define _hrt_cell_load_program_sp(proc) _hrt_cell_load_program_embedded(proc, sp)
 
-/* function longjmp: 6C56 */
+/* function longjmp: 6C37 */
 
-/* function tmpmem_init_dmem: 6969 */
+/* function tmpmem_init_dmem: 694A */
 
 /* function ia_css_dmaproxy_sp_set_addr_B: 3FBD */
 
@@ -47,9 +47,9 @@ more details.
 
 /* function ia_css_queue_get_size: 55CE */
 
-/* function ia_css_queue_load: 5BE5 */
+/* function ia_css_queue_load: 5BD5 */
 
-/* function setjmp: 6C5F */
+/* function setjmp: 6C40 */
 
 /* function ia_css_pipeline_sp_sfi_get_current_frame: 27A0 */
 
@@ -65,9 +65,9 @@ more details.
 #define HIVE_ADDR_sp_sem_for_sp2host_isys_event_queue 0x5804
 #define HIVE_SIZE_sp_sem_for_sp2host_isys_event_queue 20
 
-/* function ia_css_dmaproxy_sp_wait_for_ack: 7242 */
+/* function ia_css_dmaproxy_sp_wait_for_ack: 7223 */
 
-/* function ia_css_sp_rawcopy_func: 5D64 */
+/* function ia_css_sp_rawcopy_func: 5D45 */
 
 /* function ia_css_tagger_buf_sp_pop_marked: 3654 */
 
@@ -107,7 +107,7 @@ more details.
 #define HIVE_ADDR_sp_vbuf_raw 0x39C
 #define HIVE_SIZE_sp_vbuf_raw 4
 
-/* function ia_css_sp_bin_copy_func: 5D45 */
+/* function ia_css_sp_bin_copy_func: 5D26 */
 
 /* function ia_css_queue_item_store: 5933 */
 
@@ -297,7 +297,7 @@ more details.
 #define HIVE_ADDR_sp_sp_init_dmem_data 0x73FC
 #define HIVE_SIZE_sp_sp_init_dmem_data 24
 
-/* function ia_css_sp_metadata_start: 60FE */
+/* function ia_css_sp_metadata_start: 60DF */
 
 /* function ia_css_bufq_sp_init_buffer_queues: 38DA */
 
@@ -349,7 +349,7 @@ more details.
 #define HIVE_ADDR_sp_sp_per_frame_data 0x3F50
 #define HIVE_SIZE_sp_sp_per_frame_data 4
 
-/* function ia_css_rmgr_sp_vbuf_dequeue: 66BD */
+/* function ia_css_rmgr_sp_vbuf_dequeue: 669E */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host2sp_psys_event_queue_handle
@@ -379,7 +379,7 @@ more details.
 
 /* function ia_css_pipeline_sp_run: 1A61 */
 
-/* function memcpy: 6CFF */
+/* function memcpy: 6CE0 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_N_ISYS2401_DMA_CHANNEL_PROCS
@@ -419,11 +419,11 @@ more details.
 
 /* function stream2mmio_send_command: E04 */
 
-/* function ia_css_uds_sp_scale_params: 6A08 */
+/* function ia_css_uds_sp_scale_params: 69E9 */
 
 /* function ia_css_circbuf_increase_size: 1452 */
 
-/* function __divu: 6C7D */
+/* function __divu: 6C5E */
 
 /* function ia_css_thread_sp_get_state: 1295 */
 
@@ -467,9 +467,9 @@ more details.
 
 /* function ia_css_parambuf_sp_handle_parameter_sets: 18B5 */
 
-/* function ia_css_spctrl_sp_set_state: 611A */
+/* function ia_css_spctrl_sp_set_state: 60FB */
 
-/* function ia_css_thread_sem_sp_signal: 6F63 */
+/* function ia_css_thread_sem_sp_signal: 6F44 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_IRQ_BASE
@@ -483,7 +483,7 @@ more details.
 #define HIVE_ADDR_sp_IRQ_BASE 0x2C
 #define HIVE_SIZE_sp_IRQ_BASE 16
 
-/* function ia_css_virtual_isys_sp_isr_init: 61BB */
+/* function ia_css_virtual_isys_sp_isr_init: 619C */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_TIMED_CTRL_BASE
@@ -497,11 +497,11 @@ more details.
 #define HIVE_ADDR_sp_TIMED_CTRL_BASE 0x40
 #define HIVE_SIZE_sp_TIMED_CTRL_BASE 4
 
-/* function ia_css_isys_sp_generate_exp_id: 654D */
+/* function ia_css_isys_sp_generate_exp_id: 652E */
 
-/* function ia_css_rmgr_sp_init: 65B8 */
+/* function ia_css_rmgr_sp_init: 6599 */
 
-/* function ia_css_thread_sem_sp_init: 7032 */
+/* function ia_css_thread_sem_sp_init: 7013 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_reading_cb_frame
@@ -531,7 +531,7 @@ more details.
 
 /* function csi_rx_backend_rst: CE0 */
 
-/* function ia_css_queue_is_empty: 738F */
+/* function ia_css_queue_is_empty: 7370 */
 
 /* function ia_css_pipeline_sp_has_stopped: 1FC0 */
 
@@ -551,13 +551,13 @@ more details.
 #define HIVE_ADDR_sp_current_sp_thread 0x274
 #define HIVE_SIZE_sp_current_sp_thread 4
 
-/* function ia_css_spctrl_sp_get_spid: 6121 */
+/* function ia_css_spctrl_sp_get_spid: 6102 */
 
 /* function ia_css_bufq_sp_reset_buffers: 3961 */
 
-/* function ia_css_dmaproxy_sp_read_byte_addr: 7270 */
+/* function ia_css_dmaproxy_sp_read_byte_addr: 7251 */
 
-/* function ia_css_rmgr_sp_uninit: 65B1 */
+/* function ia_css_rmgr_sp_uninit: 6592 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_threads_stack
@@ -663,7 +663,7 @@ more details.
 #define HIVE_ADDR_sp_tmp_heap 0x7160
 #define HIVE_SIZE_sp_tmp_heap 640
 
-/* function ia_css_rmgr_sp_get_num_vbuf: 68C1 */
+/* function ia_css_rmgr_sp_get_num_vbuf: 68A2 */
 
 /* function ia_css_ispctrl_sp_output_compute_dma_info: 4C26 */
 
@@ -699,7 +699,7 @@ more details.
 #define HIVE_ADDR_sp_ia_css_rmgr_sp_mipi_frame_sem 0x7818
 #define HIVE_SIZE_sp_ia_css_rmgr_sp_mipi_frame_sem 60
 
-/* function ia_css_rmgr_sp_refcount_dump: 6698 */
+/* function ia_css_rmgr_sp_refcount_dump: 6679 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_isp_parameters_id
@@ -741,7 +741,7 @@ more details.
 #define HIVE_ADDR_sp_host2sp_isys_event_queue_handle 0x5D28
 #define HIVE_SIZE_sp_host2sp_isys_event_queue_handle 12
 
-/* function ia_css_thread_sp_yield: 6EE1 */
+/* function ia_css_thread_sp_yield: 6EC2 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cbs_param_desc
@@ -791,9 +791,9 @@ more details.
 
 /* function ia_css_thread_sp_init: 134E */
 
-/* function qos_scheduler_update_fps: 69F8 */
+/* function qos_scheduler_update_fps: 69D9 */
 
-/* function ia_css_isys_sp_reset_exp_id: 6544 */
+/* function ia_css_isys_sp_reset_exp_id: 6525 */
 
 /* function ia_css_ispctrl_sp_set_stream_base_addr: 531A */
 
@@ -827,7 +827,7 @@ more details.
 
 /* function ia_css_dmaproxy_sp_read: 3EA9 */
 
-/* function virtual_isys_stream_is_capture_done: 61DF */
+/* function virtual_isys_stream_is_capture_done: 61C0 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_raw_copy_line_count
@@ -915,9 +915,9 @@ more details.
 
 /* function debug_enqueue_ddr: EE */
 
-/* function ia_css_rmgr_sp_refcount_init_vbuf: 6653 */
+/* function ia_css_rmgr_sp_refcount_init_vbuf: 6634 */
 
-/* function dmaproxy_sp_read_write: 730E */
+/* function dmaproxy_sp_read_write: 72EF */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_dmaproxy_isp_dma_cmd_buffer
@@ -955,13 +955,13 @@ more details.
 #define HIVE_ADDR_sp_ia_css_flash_sp_in_service 0x307C
 #define HIVE_SIZE_sp_ia_css_flash_sp_in_service 4
 
-/* function ia_css_dmaproxy_sp_process: 705A */
+/* function ia_css_dmaproxy_sp_process: 703B */
 
 /* function ia_css_tagger_buf_sp_mark_from_end: 384E */
 
 /* function ia_css_ispctrl_sp_init_cs: 42F2 */
 
-/* function ia_css_spctrl_sp_init: 612F */
+/* function ia_css_spctrl_sp_init: 6110 */
 
 /* function sp_event_proxy_init: 736 */
 
@@ -1075,7 +1075,7 @@ more details.
 
 /* function pixelgen_tpg_is_done: F07 */
 
-/* function ia_css_isys_stream_capture_indication: 6322 */
+/* function ia_css_isys_stream_capture_indication: 6303 */
 
 /* function sp_start_isp_entry: 392 */
 #ifndef HIVE_MULTIPLE_PROGRAMS
@@ -1091,13 +1091,13 @@ more details.
 
 /* function ia_css_dmaproxy_sp_channel_acquire: 4144 */
 
-/* function ia_css_rmgr_sp_add_num_vbuf: 689D */
+/* function ia_css_rmgr_sp_add_num_vbuf: 687E */
 
 /* function ia_css_tagger_frame_in_capture_pipe: 28DA */
 
 /* function ibuf_ctrl_config: D85 */
 
-/* function ia_css_isys_stream_stop: 643F */
+/* function ia_css_isys_stream_stop: 6420 */
 
 /* function __ia_css_dmaproxy_sp_wait_for_ack_text: 3DFF */
 
@@ -1133,7 +1133,7 @@ more details.
 
 /* function ia_css_tagger_sp_create: 3486 */
 
-/* function tmpmem_acquire_dmem: 694A */
+/* function tmpmem_acquire_dmem: 692B */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_MMU_BASE
@@ -1187,7 +1187,7 @@ more details.
 
 /* function sp_isys_copy_request: 681 */
 
-/* function ia_css_rmgr_sp_refcount_retain_vbuf: 672D */
+/* function ia_css_rmgr_sp_refcount_retain_vbuf: 670E */
 
 /* function ia_css_thread_sp_set_priority: 12E0 */
 
@@ -1197,7 +1197,7 @@ more details.
 
 /* function pixelgen_tpg_stop: EF5 */
 
-/* function tmpmem_release_dmem: 6939 */
+/* function tmpmem_release_dmem: 691A */
 
 /* function __ia_css_dmaproxy_sp_process_text: 3DA3 */
 
@@ -1209,7 +1209,7 @@ more details.
 
 /* function ia_css_tagger_buf_sp_pop_unmarked_and_unlocked: 3608 */
 
-/* function __modu: 6CC3 */
+/* function __modu: 6CA4 */
 
 /* function ia_css_dmaproxy_sp_init_isp_vector: 3E05 */
 
@@ -1233,9 +1233,9 @@ more details.
 
 /* function ia_css_queue_local_init: 590D */
 
-/* function sp_event_proxy_callout_func: 6D90 */
+/* function sp_event_proxy_callout_func: 6D71 */
 
-/* function qos_scheduler_schedule_stage: 69A4 */
+/* function qos_scheduler_schedule_stage: 6985 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_thread_sp_num_ready_threads
@@ -1263,13 +1263,13 @@ more details.
 
 /* function ia_css_ispctrl_sp_isp_done_row_striping: 4C0C */
 
-/* function __ia_css_virtual_isys_sp_isr_text: 6199 */
+/* function __ia_css_virtual_isys_sp_isr_text: 617A */
 
 /* function ia_css_queue_dequeue: 578B */
 
-/* function is_qos_standalone_mode: 697F */
+/* function is_qos_standalone_mode: 6960 */
 
-/* function ia_css_dmaproxy_sp_configure_channel: 7287 */
+/* function ia_css_dmaproxy_sp_configure_channel: 7268 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_current_thread_fiber_sp
@@ -1285,7 +1285,7 @@ more details.
 
 /* function ia_css_circbuf_pop: 15EA */
 
-/* function memset: 6D42 */
+/* function memset: 6D23 */
 
 /* function irq_raise_set_token: B6 */
 
@@ -1355,17 +1355,17 @@ more details.
 
 /* function __ia_css_dmaproxy_sp_configure_channel_text: 3F74 */
 
-/* function ia_css_framebuf_sp_wait_for_in_frame: 68C8 */
+/* function ia_css_framebuf_sp_wait_for_in_frame: 68A9 */
 
-/* function ia_css_isys_stream_open: 64F4 */
+/* function ia_css_isys_stream_open: 64D5 */
 
-/* function ia_css_sp_rawcopy_tag_frame: 6074 */
+/* function ia_css_sp_rawcopy_tag_frame: 6055 */
 
 /* function input_system_channel_configure: 11D8 */
 
 /* function isp_hmem_clear: B2D */
 
-/* function ia_css_framebuf_sp_release_in_frame: 690B */
+/* function ia_css_framebuf_sp_release_in_frame: 68EC */
 
 /* function stream2mmio_config: E15 */
 
@@ -1399,7 +1399,7 @@ more details.
 #define HIVE_ADDR_sp_isp_pool 0x390
 #define HIVE_SIZE_sp_isp_pool 4
 
-/* function ia_css_rmgr_sp_rel_gen: 65FA */
+/* function ia_css_rmgr_sp_rel_gen: 65DB */
 
 /* function ia_css_tagger_sp_unblock_clients: 32F2 */
 
@@ -1423,9 +1423,9 @@ more details.
 
 /* function debug_enqueue_isp: 27B */
 
-/* function qos_scheduler_update_stage_budget: 6987 */
+/* function qos_scheduler_update_stage_budget: 6968 */
 
-/* function ia_css_spctrl_sp_uninit: 6128 */
+/* function ia_css_spctrl_sp_uninit: 6109 */
 
 /* function csi_rx_backend_run: C62 */
 
@@ -1475,7 +1475,7 @@ more details.
 #define HIVE_ADDR_sp_ISP_VAMEM_BASE 0x14
 #define HIVE_SIZE_sp_ISP_VAMEM_BASE 12
 
-/* function input_system_channel_sync: 6E5B */
+/* function input_system_channel_sync: 6E3C */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_rawcopy_sp_tagger
@@ -1503,7 +1503,7 @@ more details.
 
 /* function ia_css_queue_item_load: 59FF */
 
-/* function ia_css_spctrl_sp_get_state: 6113 */
+/* function ia_css_spctrl_sp_get_state: 60F4 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_callout_sp_thread
@@ -1543,21 +1543,21 @@ more details.
 #define HIVE_ADDR_sp_sp_isp_input_stream_format 0x3E58
 #define HIVE_SIZE_sp_sp_isp_input_stream_format 20
 
-/* function __mod: 6CAF */
+/* function __mod: 6C90 */
 
 /* function ia_css_dmaproxy_sp_init_dmem_channel: 3EC3 */
 
 /* function ia_css_thread_sp_join: 1311 */
 
-/* function ia_css_dmaproxy_sp_add_command: 7379 */
+/* function ia_css_dmaproxy_sp_add_command: 735A */
 
-/* function ia_css_sp_metadata_thread_func: 610C */
+/* function ia_css_sp_metadata_thread_func: 60ED */
 
-/* function __sp_event_proxy_func_critical: 6D7D */
+/* function __sp_event_proxy_func_critical: 6D5E */
 
-/* function ia_css_pipeline_sp_wait_for_isys_stream_N: 62BF */
+/* function ia_css_pipeline_sp_wait_for_isys_stream_N: 62A0 */
 
-/* function ia_css_sp_metadata_wait: 6105 */
+/* function ia_css_sp_metadata_wait: 60E6 */
 
 /* function ia_css_circbuf_peek_from_start: 151A */
 
@@ -1591,7 +1591,7 @@ more details.
 #define HIVE_ADDR_sp_N_CSI_RX_FE_CTRL_DLANES 0x1C4
 #define HIVE_SIZE_sp_N_CSI_RX_FE_CTRL_DLANES 12
 
-/* function ia_css_dmaproxy_sp_read_byte_addr_mmio: 7259 */
+/* function ia_css_dmaproxy_sp_read_byte_addr_mmio: 723A */
 
 /* function ia_css_ispctrl_sp_done_ds: 4465 */
 
@@ -1637,7 +1637,7 @@ more details.
 #define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_frames 0x6B28
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_frames 280
 
-/* function qos_scheduler_init_stage_budget: 69E5 */
+/* function qos_scheduler_init_stage_budget: 69C6 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp2host_buffer_queue_handle
@@ -1653,11 +1653,11 @@ more details.
 
 /* function ia_css_ispctrl_sp_init_isp_vars: 517F */
 
-/* function ia_css_isys_stream_start: 63D2 */
+/* function ia_css_isys_stream_start: 63B3 */
 
 /* function sp_warning: 8E8 */
 
-/* function ia_css_rmgr_sp_vbuf_enqueue: 66ED */
+/* function ia_css_rmgr_sp_vbuf_enqueue: 66CE */
 
 /* function ia_css_tagger_sp_tag_exp_id: 2A88 */
 
@@ -1665,7 +1665,7 @@ more details.
 
 /* function ia_css_dmaproxy_sp_write: 3E79 */
 
-/* function ia_css_isys_stream_start_async: 649B */
+/* function ia_css_isys_stream_start_async: 647C */
 
 /* function ia_css_parambuf_sp_release_in_param: 187B */
 
@@ -1693,7 +1693,7 @@ more details.
 #define HIVE_ADDR_sp_sp_isp_addresses 0x7094
 #define HIVE_SIZE_sp_sp_isp_addresses 172
 
-/* function ia_css_rmgr_sp_acq_gen: 6612 */
+/* function ia_css_rmgr_sp_acq_gen: 65F3 */
 
 /* function input_system_input_port_open: 10E7 */
 
@@ -1801,11 +1801,11 @@ more details.
 
 /* function ia_css_pipeline_sp_start: 1FD2 */
 
-/* function ia_css_thread_default_callout: 6EDA */
+/* function ia_css_thread_default_callout: 6EBB */
 
 /* function csi_rx_backend_enable: C3F */
 
-/* function ia_css_sp_rawcopy_init: 5D4C */
+/* function ia_css_sp_rawcopy_init: 5D2D */
 
 /* function input_system_input_port_configure: 1139 */
 
@@ -1863,7 +1863,7 @@ more details.
 #define HIVE_ADDR_sp_sp_all_cbs_frame 0x595C
 #define HIVE_SIZE_sp_sp_all_cbs_frame 16
 
-/* function ia_css_virtual_isys_sp_isr: 73B9 */
+/* function ia_css_virtual_isys_sp_isr: 739A */
 
 /* function thread_sp_queue_print: 13A1 */
 
@@ -1905,9 +1905,9 @@ more details.
 
 /* function ia_css_tagger_buf_sp_pop_from_start: 358A */
 
-/* function __div: 6C67 */
+/* function __div: 6C48 */
 
-/* function ia_css_rmgr_sp_refcount_release_vbuf: 670C */
+/* function ia_css_rmgr_sp_refcount_release_vbuf: 66ED */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_flash_sp_in_use
@@ -1921,7 +1921,7 @@ more details.
 #define HIVE_ADDR_sp_ia_css_flash_sp_in_use 0x5BE8
 #define HIVE_SIZE_sp_ia_css_flash_sp_in_use 4
 
-/* function ia_css_thread_sem_sp_wait: 6FAE */
+/* function ia_css_thread_sem_sp_wait: 6F8F */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_sleep_mode
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.c
index 70bf169..418a933 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.c
@@ -446,6 +446,56 @@ size);
 /* Code generated by genparam/gencode.c:gen_process_function() */
 
 static void
+ia_css_process_tdf(
+	unsigned pipe_id,
+	const struct ia_css_pipeline_stage *stage,
+	struct ia_css_isp_parameters *params)
+{
+	assert(params != NULL);
+
+	{
+		unsigned size   = stage->binary->info->mem_offsets.offsets.param->vmem.tdf.size;
+
+		unsigned offset = stage->binary->info->mem_offsets.offsets.param->vmem.tdf.offset;
+
+		if (size) {
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() enter:\n");
+
+			ia_css_tdf_vmem_encode((struct tdf_vmem_params *)
+					&stage->binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_VMEM].address[offset],
+					&params->tdf_config,
+size);
+			params->isp_params_changed = true;
+			params->isp_mem_params_changed[pipe_id][stage->stage_num][IA_CSS_ISP_VMEM] = true;
+
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() leave:\n");
+		}
+
+	}
+	{
+		unsigned size   = stage->binary->info->mem_offsets.offsets.param->dmem.tdf.size;
+
+		unsigned offset = stage->binary->info->mem_offsets.offsets.param->dmem.tdf.offset;
+
+		if (size) {
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() enter:\n");
+
+			ia_css_tdf_encode((struct tdf_dmem_params *)
+					&stage->binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset],
+					&params->tdf_config,
+size);
+			params->isp_params_changed = true;
+			params->isp_mem_params_changed[pipe_id][stage->stage_num][IA_CSS_ISP_DMEM] = true;
+
+			ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_process_tdf() leave:\n");
+		}
+
+	}
+}
+
+/* Code generated by genparam/gencode.c:gen_process_function() */
+
+static void
 ia_css_process_eed1_8(
 	unsigned pipe_id,
 	const struct ia_css_pipeline_stage *stage,
@@ -1964,6 +2014,7 @@ void (* ia_css_kernel_process_param[IA_CSS_NUM_PARAMETER_IDS])(
 	ia_css_process_bnr,
 	ia_css_process_dpc2,
 	ia_css_process_bnlm,
+	ia_css_process_tdf,
 	ia_css_process_eed1_8,
 	ia_css_process_de,
 	ia_css_process_ecd,
@@ -2120,6 +2171,42 @@ ia_css_set_bnlm_config(struct ia_css_isp_parameters *params,
 /* Code generated by genparam/gencode.c:gen_get_function() */
 
 static void
+ia_css_get_tdf_config(const struct ia_css_isp_parameters *params,
+			struct ia_css_tdf_config *config){
+	if (config == NULL)
+		return;
+
+	assert(params != NULL);
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_get_tdf_config() enter: "
+		"config=%p\n",config);
+
+	*config = params->tdf_config;
+
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_get_tdf_config() leave\n");
+	ia_css_tdf_debug_dtrace(config, IA_CSS_DEBUG_TRACE);
+}
+
+/* Code generated by genparam/gencode.c:gen_set_function() */
+
+void
+ia_css_set_tdf_config(struct ia_css_isp_parameters *params,
+			const struct ia_css_tdf_config *config)
+{
+	if (config == NULL)
+		return;
+
+	assert(params != NULL);
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE, "ia_css_set_tdf_config() enter:\n");
+	ia_css_tdf_debug_dtrace(config, IA_CSS_DEBUG_TRACE);
+	params->tdf_config = *config;
+	params->config_changed[IA_CSS_TDF_ID] = true;
+	ia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_set_tdf_config() leave: "
+		"return_void\n");
+}
+
+/* Code generated by genparam/gencode.c:gen_get_function() */
+
+static void
 ia_css_get_eed1_8_config(const struct ia_css_isp_parameters *params,
 			struct ia_css_eed1_8_config *config){
 	if (config == NULL)
@@ -3664,6 +3751,7 @@ ia_css_get_configs(struct ia_css_isp_parameters *params,
 	ia_css_get_dp_config(params, config->dp_config);
 	ia_css_get_dpc2_config(params, config->dpc2_config);
 	ia_css_get_bnlm_config(params, config->bnlm_config);
+	ia_css_get_tdf_config(params, config->tdf_config);
 	ia_css_get_eed1_8_config(params, config->eed1_8_config);
 	ia_css_get_wb_config(params, config->wb_config);
 	ia_css_get_tnr_config(params, config->tnr_config);
@@ -3717,6 +3805,7 @@ ia_css_set_configs(struct ia_css_isp_parameters *params,
 	ia_css_set_dp_config(params, config->dp_config);
 	ia_css_set_dpc2_config(params, config->dpc2_config);
 	ia_css_set_bnlm_config(params, config->bnlm_config);
+	ia_css_set_tdf_config(params, config->tdf_config);
 	ia_css_set_eed1_8_config(params, config->eed1_8_config);
 	ia_css_set_wb_config(params, config->wb_config);
 	ia_css_set_tnr_config(params, config->tnr_config);
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.h
index 2b971c8..3ab1013 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/hive_isp_css_2401_system_generated/ia_css_isp_params.h
@@ -30,6 +30,7 @@ enum ia_css_parameter_ids {
 	IA_CSS_BNR_ID,
 	IA_CSS_DPC2_ID,
 	IA_CSS_BNLM_ID,
+	IA_CSS_TDF_ID,
 	IA_CSS_EED1_8_ID,
 	IA_CSS_DE_ID,
 	IA_CSS_ECD_ID,
@@ -90,6 +91,7 @@ struct ia_css_memory_offsets {
 		struct ia_css_isp_parameter bnr;
 		struct ia_css_isp_parameter dpc2;
 		struct ia_css_isp_parameter bnlm;
+		struct ia_css_isp_parameter tdf;
 		struct ia_css_isp_parameter eed1_8;
 		struct ia_css_isp_parameter de;
 		struct ia_css_isp_parameter ecd;
@@ -132,6 +134,7 @@ struct ia_css_memory_offsets {
 	struct {
 		struct ia_css_isp_parameter anr2;
 		struct ia_css_isp_parameter bnlm;
+		struct ia_css_isp_parameter tdf;
 		struct ia_css_isp_parameter eed1_8;
 		struct ia_css_isp_parameter ob;
 		struct ia_css_isp_parameter macc1_5;
@@ -195,6 +198,12 @@ ia_css_set_bnlm_config(struct ia_css_isp_parameters *params,
 /* Code generated by genparam/gencode.c:gen_set_function() */
 
 void
+ia_css_set_tdf_config(struct ia_css_isp_parameters *params,
+			const struct ia_css_tdf_config *config);
+
+/* Code generated by genparam/gencode.c:gen_set_function() */
+
+void
 ia_css_set_eed1_8_config(struct ia_css_isp_parameters *params,
 			const struct ia_css_eed1_8_config *config);
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/spmem_dump.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/spmem_dump.c
index 19b9448..1f78fe0 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/spmem_dump.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_2401_system/spmem_dump.c
@@ -23,7 +23,7 @@ more details.
 
 /* function input_system_acquisition_stop: AD8 */
 
-/* function longjmp: 6C0E */
+/* function longjmp: 6BEF */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_HIVE_IF_SRST_MASK
@@ -37,9 +37,9 @@ more details.
 #define HIVE_ADDR_sp_HIVE_IF_SRST_MASK 0x1C8
 #define HIVE_SIZE_sp_HIVE_IF_SRST_MASK 16
 
-/* function tmpmem_init_dmem: 6921 */
+/* function tmpmem_init_dmem: 6902 */
 
-/* function ia_css_isys_sp_token_map_receive_ack: 6265 */
+/* function ia_css_isys_sp_token_map_receive_ack: 6246 */
 
 /* function ia_css_dmaproxy_sp_set_addr_B: 3731 */
 
@@ -65,9 +65,9 @@ more details.
 
 /* function ia_css_queue_get_size: 4D4C */
 
-/* function ia_css_queue_load: 5363 */
+/* function ia_css_queue_load: 5353 */
 
-/* function setjmp: 6C17 */
+/* function setjmp: 6BF8 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_sp2host_isys_event_queue
@@ -81,9 +81,9 @@ more details.
 #define HIVE_ADDR_sp_sem_for_sp2host_isys_event_queue 0x46D4
 #define HIVE_SIZE_sp_sem_for_sp2host_isys_event_queue 20
 
-/* function ia_css_dmaproxy_sp_wait_for_ack: 7198 */
+/* function ia_css_dmaproxy_sp_wait_for_ack: 7179 */
 
-/* function ia_css_sp_rawcopy_func: 559C */
+/* function ia_css_sp_rawcopy_func: 557D */
 
 /* function ia_css_tagger_buf_sp_pop_marked: 2DAA */
 
@@ -111,7 +111,7 @@ more details.
 #define HIVE_ADDR_sp_vbuf_raw 0x314
 #define HIVE_SIZE_sp_vbuf_raw 4
 
-/* function ia_css_sp_bin_copy_func: 54C3 */
+/* function ia_css_sp_bin_copy_func: 54A4 */
 
 /* function ia_css_queue_item_store: 50B1 */
 
@@ -215,7 +215,7 @@ more details.
 
 /* function ia_css_sp_flash_register: 2FDF */
 
-/* function ia_css_isys_sp_backend_create: 5ED8 */
+/* function ia_css_isys_sp_backend_create: 5EB9 */
 
 /* function ia_css_pipeline_sp_init: 1896 */
 
@@ -301,7 +301,7 @@ more details.
 #define HIVE_ADDR_sp_sp_init_dmem_data 0x6314
 #define HIVE_SIZE_sp_sp_init_dmem_data 24
 
-/* function ia_css_sp_metadata_start: 5CB5 */
+/* function ia_css_sp_metadata_start: 5C96 */
 
 /* function ia_css_bufq_sp_init_buffer_queues: 304E */
 
@@ -329,7 +329,7 @@ more details.
 #define HIVE_ADDR_sp_sp_per_frame_data 0x4218
 #define HIVE_SIZE_sp_sp_per_frame_data 4
 
-/* function ia_css_rmgr_sp_vbuf_dequeue: 6675 */
+/* function ia_css_rmgr_sp_vbuf_dequeue: 6656 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_host2sp_psys_event_queue_handle
@@ -359,7 +359,7 @@ more details.
 
 /* function ia_css_pipeline_sp_run: 143D */
 
-/* function memcpy: 6CB7 */
+/* function memcpy: 6C98 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_GP_DEVICE_BASE
@@ -387,13 +387,13 @@ more details.
 
 /* function input_system_reg_store: B18 */
 
-/* function ia_css_isys_sp_frontend_start: 60EE */
+/* function ia_css_isys_sp_frontend_start: 60CF */
 
-/* function ia_css_uds_sp_scale_params: 69C0 */
+/* function ia_css_uds_sp_scale_params: 69A1 */
 
 /* function ia_css_circbuf_increase_size: E35 */
 
-/* function __divu: 6C35 */
+/* function __divu: 6C16 */
 
 /* function ia_css_thread_sp_get_state: C78 */
 
@@ -425,9 +425,9 @@ more details.
 
 /* function ia_css_parambuf_sp_handle_parameter_sets: 127F */
 
-/* function ia_css_spctrl_sp_set_state: 5CE4 */
+/* function ia_css_spctrl_sp_set_state: 5CC5 */
 
-/* function ia_css_thread_sem_sp_signal: 6EB9 */
+/* function ia_css_thread_sem_sp_signal: 6E9A */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_IRQ_BASE
@@ -453,13 +453,13 @@ more details.
 #define HIVE_ADDR_sp_TIMED_CTRL_BASE 0x40
 #define HIVE_SIZE_sp_TIMED_CTRL_BASE 4
 
-/* function ia_css_isys_sp_isr: 7386 */
+/* function ia_css_isys_sp_isr: 7367 */
 
-/* function ia_css_isys_sp_generate_exp_id: 6486 */
+/* function ia_css_isys_sp_generate_exp_id: 6467 */
 
-/* function ia_css_rmgr_sp_init: 6570 */
+/* function ia_css_rmgr_sp_init: 6551 */
 
-/* function ia_css_thread_sem_sp_init: 6F88 */
+/* function ia_css_thread_sem_sp_init: 6F69 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_reading_cb_frame
@@ -487,7 +487,7 @@ more details.
 
 /* function ia_css_dmaproxy_sp_execute: 3607 */
 
-/* function ia_css_queue_is_empty: 72E5 */
+/* function ia_css_queue_is_empty: 72C6 */
 
 /* function ia_css_pipeline_sp_has_stopped: 186F */
 
@@ -507,13 +507,13 @@ more details.
 #define HIVE_ADDR_sp_current_sp_thread 0x1DC
 #define HIVE_SIZE_sp_current_sp_thread 4
 
-/* function ia_css_spctrl_sp_get_spid: 5CEB */
+/* function ia_css_spctrl_sp_get_spid: 5CCC */
 
 /* function ia_css_bufq_sp_reset_buffers: 30D5 */
 
-/* function ia_css_dmaproxy_sp_read_byte_addr: 71C6 */
+/* function ia_css_dmaproxy_sp_read_byte_addr: 71A7 */
 
-/* function ia_css_rmgr_sp_uninit: 6569 */
+/* function ia_css_rmgr_sp_uninit: 654A */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_threads_stack
@@ -531,7 +531,7 @@ more details.
 
 /* function ia_css_parambuf_sp_wait_for_in_param: 1048 */
 
-/* function ia_css_isys_sp_token_map_get_exp_id: 634E */
+/* function ia_css_isys_sp_token_map_get_exp_id: 632F */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cb_elems_param
@@ -609,7 +609,7 @@ more details.
 #define HIVE_ADDR_sp_tmp_heap 0x6078
 #define HIVE_SIZE_sp_tmp_heap 640
 
-/* function ia_css_rmgr_sp_get_num_vbuf: 6879 */
+/* function ia_css_rmgr_sp_get_num_vbuf: 685A */
 
 /* function ia_css_ispctrl_sp_output_compute_dma_info: 43A4 */
 
@@ -631,7 +631,7 @@ more details.
 
 /* function debug_buffer_init_isp: E4 */
 
-/* function ia_css_isys_sp_frontend_uninit: 60A8 */
+/* function ia_css_isys_sp_frontend_uninit: 6089 */
 
 /* function ia_css_tagger_sp_exp_id_is_locked: 2084 */
 
@@ -647,7 +647,7 @@ more details.
 #define HIVE_ADDR_sp_ia_css_rmgr_sp_mipi_frame_sem 0x674C
 #define HIVE_SIZE_sp_ia_css_rmgr_sp_mipi_frame_sem 60
 
-/* function ia_css_rmgr_sp_refcount_dump: 6650 */
+/* function ia_css_rmgr_sp_refcount_dump: 6631 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_pipe_private_isp_parameters_id
@@ -687,7 +687,7 @@ more details.
 #define HIVE_ADDR_sp_host2sp_isys_event_queue_handle 0x4C40
 #define HIVE_SIZE_sp_host2sp_isys_event_queue_handle 12
 
-/* function ia_css_thread_sp_yield: 6E37 */
+/* function ia_css_thread_sp_yield: 6E18 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_all_cbs_param_desc
@@ -719,7 +719,7 @@ more details.
 
 /* function ia_css_dmaproxy_sp_vmem_read: 35A7 */
 
-/* function ia_css_ifmtr_sp_init: 64D7 */
+/* function ia_css_ifmtr_sp_init: 64B8 */
 
 /* function initialize_sp_group: 668 */
 
@@ -727,9 +727,9 @@ more details.
 
 /* function ia_css_thread_sp_init: D31 */
 
-/* function ia_css_isys_sp_reset_exp_id: 647E */
+/* function ia_css_isys_sp_reset_exp_id: 645F */
 
-/* function qos_scheduler_update_fps: 69B0 */
+/* function qos_scheduler_update_fps: 6991 */
 
 /* function ia_css_ispctrl_sp_set_stream_base_addr: 4A98 */
 
@@ -825,13 +825,13 @@ more details.
 
 /* function encode_and_post_sp_event_non_blocking: A0C */
 
-/* function ia_css_isys_sp_frontend_destroy: 6180 */
+/* function ia_css_isys_sp_frontend_destroy: 6161 */
 
 /* function is_ddr_debug_buffer_full: 2CC */
 
-/* function ia_css_isys_sp_frontend_stop: 60C0 */
+/* function ia_css_isys_sp_frontend_stop: 60A1 */
 
-/* function ia_css_isys_sp_token_map_init: 641C */
+/* function ia_css_isys_sp_token_map_init: 63FD */
 
 /* function ia_css_tagger_buf_sp_get_oldest_marked_offset: 2D1C */
 
@@ -851,9 +851,9 @@ more details.
 
 /* function debug_enqueue_ddr: EE */
 
-/* function ia_css_rmgr_sp_refcount_init_vbuf: 660B */
+/* function ia_css_rmgr_sp_refcount_init_vbuf: 65EC */
 
-/* function dmaproxy_sp_read_write: 7264 */
+/* function dmaproxy_sp_read_write: 7245 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_dmaproxy_isp_dma_cmd_buffer
@@ -891,17 +891,17 @@ more details.
 #define HIVE_ADDR_sp_ia_css_flash_sp_in_service 0x31A0
 #define HIVE_SIZE_sp_ia_css_flash_sp_in_service 4
 
-/* function ia_css_dmaproxy_sp_process: 6FB0 */
+/* function ia_css_dmaproxy_sp_process: 6F91 */
 
 /* function ia_css_tagger_buf_sp_mark_from_end: 2FA4 */
 
-/* function ia_css_isys_sp_backend_rcv_acquire_ack: 5D8D */
+/* function ia_css_isys_sp_backend_rcv_acquire_ack: 5D6E */
 
-/* function ia_css_isys_sp_backend_pre_acquire_request: 5DA3 */
+/* function ia_css_isys_sp_backend_pre_acquire_request: 5D84 */
 
 /* function ia_css_ispctrl_sp_init_cs: 3A66 */
 
-/* function ia_css_spctrl_sp_init: 5CF9 */
+/* function ia_css_spctrl_sp_init: 5CDA */
 
 /* function sp_event_proxy_init: 6C4 */
 
@@ -967,7 +967,7 @@ more details.
 
 /* function sp_dma_proxy_reset_channels: 388C */
 
-/* function ia_css_isys_sp_backend_acquire: 5EAE */
+/* function ia_css_isys_sp_backend_acquire: 5E8F */
 
 /* function ia_css_tagger_sp_update_size: 2C2E */
 
@@ -1027,11 +1027,11 @@ more details.
 
 /* function ia_css_dmaproxy_sp_channel_acquire: 38B8 */
 
-/* function ia_css_rmgr_sp_add_num_vbuf: 6855 */
+/* function ia_css_rmgr_sp_add_num_vbuf: 6836 */
 
 /* function ia_css_tagger_frame_in_capture_pipe: 2030 */
 
-/* function ia_css_isys_sp_token_map_create: 6465 */
+/* function ia_css_isys_sp_token_map_create: 6446 */
 
 /* function __ia_css_dmaproxy_sp_wait_for_ack_text: 3573 */
 
@@ -1067,7 +1067,7 @@ more details.
 
 /* function ia_css_tagger_sp_create: 2BDC */
 
-/* function tmpmem_acquire_dmem: 6902 */
+/* function tmpmem_acquire_dmem: 68E3 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_MMU_BASE
@@ -1131,17 +1131,17 @@ more details.
 
 /* function sp_isys_copy_request: 6A8 */
 
-/* function ia_css_rmgr_sp_refcount_retain_vbuf: 66E5 */
+/* function ia_css_rmgr_sp_refcount_retain_vbuf: 66C6 */
 
 /* function ia_css_thread_sp_set_priority: CC3 */
 
 /* function sizeof_hmem: BF6 */
 
-/* function tmpmem_release_dmem: 68F1 */
+/* function tmpmem_release_dmem: 68D2 */
 
 /* function cnd_input_system_cfg: 392 */
 
-/* function __ia_css_sp_rawcopy_func_critical: 730F */
+/* function __ia_css_sp_rawcopy_func_critical: 72F0 */
 
 /* function __ia_css_dmaproxy_sp_process_text: 3517 */
 
@@ -1153,7 +1153,7 @@ more details.
 
 /* function ia_css_tagger_buf_sp_pop_unmarked_and_unlocked: 2D5E */
 
-/* function __modu: 6C7B */
+/* function __modu: 6C5C */
 
 /* function ia_css_dmaproxy_sp_init_isp_vector: 3579 */
 
@@ -1175,9 +1175,9 @@ more details.
 
 /* function ia_css_queue_local_init: 508B */
 
-/* function sp_event_proxy_callout_func: 6D48 */
+/* function sp_event_proxy_callout_func: 6D29 */
 
-/* function qos_scheduler_schedule_stage: 695C */
+/* function qos_scheduler_schedule_stage: 693D */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_thread_sp_num_ready_threads
@@ -1205,13 +1205,13 @@ more details.
 
 /* function ia_css_ispctrl_sp_isp_done_row_striping: 438A */
 
-/* function __ia_css_isys_sp_isr_text: 61AA */
+/* function __ia_css_isys_sp_isr_text: 618B */
 
 /* function ia_css_queue_dequeue: 4F09 */
 
-/* function is_qos_standalone_mode: 6937 */
+/* function is_qos_standalone_mode: 6918 */
 
-/* function ia_css_dmaproxy_sp_configure_channel: 71DD */
+/* function ia_css_dmaproxy_sp_configure_channel: 71BE */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_current_thread_fiber_sp
@@ -1227,7 +1227,7 @@ more details.
 
 /* function ia_css_circbuf_pop: FCD */
 
-/* function memset: 6CFA */
+/* function memset: 6CDB */
 
 /* function irq_raise_set_token: B6 */
 
@@ -1259,7 +1259,7 @@ more details.
 #define HIVE_ADDR_sp_isp_ph 0x6348
 #define HIVE_SIZE_sp_isp_ph 28
 
-/* function ia_css_isys_sp_token_map_flush: 63AA */
+/* function ia_css_isys_sp_token_map_flush: 638B */
 
 /* function ia_css_ispctrl_sp_init_ds: 3BF2 */
 
@@ -1293,17 +1293,17 @@ more details.
 
 /* function __ia_css_dmaproxy_sp_configure_channel_text: 36E8 */
 
-/* function ia_css_framebuf_sp_wait_for_in_frame: 6880 */
+/* function ia_css_framebuf_sp_wait_for_in_frame: 6861 */
 
-/* function ia_css_sp_rawcopy_tag_frame: 5A0A */
+/* function ia_css_sp_rawcopy_tag_frame: 59EB */
 
 /* function isp_hmem_clear: B1F */
 
-/* function ia_css_framebuf_sp_release_in_frame: 68C3 */
+/* function ia_css_framebuf_sp_release_in_frame: 68A4 */
 
-/* function ia_css_isys_sp_backend_snd_acquire_request: 5E00 */
+/* function ia_css_isys_sp_backend_snd_acquire_request: 5DE1 */
 
-/* function ia_css_isys_sp_token_map_is_full: 6231 */
+/* function ia_css_isys_sp_token_map_is_full: 6212 */
 
 /* function input_system_acquisition_run: AF3 */
 
@@ -1335,7 +1335,7 @@ more details.
 #define HIVE_ADDR_sp_isp_pool 0x308
 #define HIVE_SIZE_sp_isp_pool 4
 
-/* function ia_css_rmgr_sp_rel_gen: 65B2 */
+/* function ia_css_rmgr_sp_rel_gen: 6593 */
 
 /* function ia_css_tagger_sp_unblock_clients: 2A48 */
 
@@ -1353,15 +1353,15 @@ more details.
 #define HIVE_ADDR_sp_event_any_pending_mask 0x320
 #define HIVE_SIZE_sp_event_any_pending_mask 8
 
-/* function ia_css_isys_sp_backend_push: 5DB7 */
+/* function ia_css_isys_sp_backend_push: 5D98 */
 
 /* function sh_css_decode_tag_descr: 352 */
 
 /* function debug_enqueue_isp: 27B */
 
-/* function qos_scheduler_update_stage_budget: 693F */
+/* function qos_scheduler_update_stage_budget: 6920 */
 
-/* function ia_css_spctrl_sp_uninit: 5CF2 */
+/* function ia_css_spctrl_sp_uninit: 5CD3 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_HIVE_IF_SWITCH_CODE
@@ -1447,9 +1447,9 @@ more details.
 
 /* function ia_css_queue_item_load: 517D */
 
-/* function ia_css_spctrl_sp_get_state: 5CDD */
+/* function ia_css_spctrl_sp_get_state: 5CBE */
 
-/* function ia_css_isys_sp_token_map_uninit: 63C7 */
+/* function ia_css_isys_sp_token_map_uninit: 63A8 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_callout_sp_thread
@@ -1477,7 +1477,7 @@ more details.
 #define HIVE_ADDR_sp_SP_PMEM_BASE 0x0
 #define HIVE_SIZE_sp_SP_PMEM_BASE 4
 
-/* function ia_css_isys_sp_token_map_snd_acquire_req: 6337 */
+/* function ia_css_isys_sp_token_map_snd_acquire_req: 6318 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_isp_input_stream_format
@@ -1491,19 +1491,19 @@ more details.
 #define HIVE_ADDR_sp_sp_isp_input_stream_format 0x4120
 #define HIVE_SIZE_sp_sp_isp_input_stream_format 20
 
-/* function __mod: 6C67 */
+/* function __mod: 6C48 */
 
 /* function ia_css_dmaproxy_sp_init_dmem_channel: 3637 */
 
 /* function ia_css_thread_sp_join: CF4 */
 
-/* function ia_css_dmaproxy_sp_add_command: 72CF */
+/* function ia_css_dmaproxy_sp_add_command: 72B0 */
 
-/* function ia_css_sp_metadata_thread_func: 5BB5 */
+/* function ia_css_sp_metadata_thread_func: 5B96 */
 
-/* function __sp_event_proxy_func_critical: 6D35 */
+/* function __sp_event_proxy_func_critical: 6D16 */
 
-/* function ia_css_sp_metadata_wait: 5CA4 */
+/* function ia_css_sp_metadata_wait: 5C85 */
 
 /* function ia_css_circbuf_peek_from_start: EFD */
 
@@ -1513,9 +1513,9 @@ more details.
 
 /* function sp_isys_copy_func: 68A */
 
-/* function ia_css_isys_sp_backend_flush: 5E20 */
+/* function ia_css_isys_sp_backend_flush: 5E01 */
 
-/* function ia_css_isys_sp_backend_frame_exists: 5D3C */
+/* function ia_css_isys_sp_backend_frame_exists: 5D1D */
 
 /* function ia_css_sp_isp_param_init_isp_memories: 4C30 */
 
@@ -1551,7 +1551,7 @@ more details.
 #define HIVE_ADDR_sp_ia_css_isys_sp_frontend_states 0x632C
 #define HIVE_SIZE_sp_ia_css_isys_sp_frontend_states 12
 
-/* function ia_css_dmaproxy_sp_read_byte_addr_mmio: 71AF */
+/* function ia_css_dmaproxy_sp_read_byte_addr_mmio: 7190 */
 
 /* function ia_css_ispctrl_sp_done_ds: 3BD9 */
 
@@ -1597,11 +1597,11 @@ more details.
 #define HIVE_ADDR_sp_ia_css_bufq_sp_pipe_private_frames 0x5A40
 #define HIVE_SIZE_sp_ia_css_bufq_sp_pipe_private_frames 280
 
-/* function qos_scheduler_init_stage_budget: 699D */
+/* function qos_scheduler_init_stage_budget: 697E */
 
-/* function ia_css_isys_sp_backend_release: 5E95 */
+/* function ia_css_isys_sp_backend_release: 5E76 */
 
-/* function ia_css_isys_sp_backend_destroy: 5EBF */
+/* function ia_css_isys_sp_backend_destroy: 5EA0 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp2host_buffer_queue_handle
@@ -1615,15 +1615,15 @@ more details.
 #define HIVE_ADDR_sp_sp2host_buffer_queue_handle 0x5B58
 #define HIVE_SIZE_sp_sp2host_buffer_queue_handle 96
 
-/* function ia_css_isys_sp_token_map_check_mipi_frame_size: 62FB */
+/* function ia_css_isys_sp_token_map_check_mipi_frame_size: 62DC */
 
 /* function ia_css_ispctrl_sp_init_isp_vars: 48FD */
 
-/* function ia_css_isys_sp_frontend_has_empty_mipi_buffer_cb: 5F11 */
+/* function ia_css_isys_sp_frontend_has_empty_mipi_buffer_cb: 5EF2 */
 
 /* function sp_warning: 870 */
 
-/* function ia_css_rmgr_sp_vbuf_enqueue: 66A5 */
+/* function ia_css_rmgr_sp_vbuf_enqueue: 6686 */
 
 /* function ia_css_tagger_sp_tag_exp_id: 21DE */
 
@@ -1655,7 +1655,7 @@ more details.
 #define HIVE_ADDR_sp_sp_isp_addresses 0x5FAC
 #define HIVE_SIZE_sp_sp_isp_addresses 172
 
-/* function ia_css_rmgr_sp_acq_gen: 65CA */
+/* function ia_css_rmgr_sp_acq_gen: 65AB */
 
 /* function receiver_reg_load: ACA */
 
@@ -1757,7 +1757,7 @@ more details.
 #define HIVE_ADDR_sp_tagger_frames 0x4A50
 #define HIVE_SIZE_sp_tagger_frames 168
 
-/* function ia_css_isys_sp_token_map_snd_capture_req: 6359 */
+/* function ia_css_isys_sp_token_map_snd_capture_req: 633A */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sem_for_reading_if
@@ -1775,9 +1775,9 @@ more details.
 
 /* function ia_css_pipeline_sp_start: 1881 */
 
-/* function ia_css_thread_default_callout: 6E30 */
+/* function ia_css_thread_default_callout: 6E11 */
 
-/* function ia_css_sp_rawcopy_init: 5584 */
+/* function ia_css_sp_rawcopy_init: 5565 */
 
 /* function tmr_clock_read: 1412 */
 
@@ -1793,7 +1793,7 @@ more details.
 #define HIVE_ADDR_sp_ISP_BAMEM_BASE 0x318
 #define HIVE_SIZE_sp_ISP_BAMEM_BASE 4
 
-/* function ia_css_isys_sp_frontend_rcv_capture_ack: 5FC0 */
+/* function ia_css_isys_sp_frontend_rcv_capture_ack: 5FA1 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_bufq_sp_sems_for_sp2host_buf_queues
@@ -1859,11 +1859,11 @@ more details.
 
 /* function ia_css_tagger_buf_sp_pop_from_start: 2CE0 */
 
-/* function __div: 6C1F */
+/* function __div: 6C00 */
 
-/* function ia_css_isys_sp_frontend_create: 6191 */
+/* function ia_css_isys_sp_frontend_create: 6172 */
 
-/* function ia_css_rmgr_sp_refcount_release_vbuf: 66C4 */
+/* function ia_css_rmgr_sp_refcount_release_vbuf: 66A5 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_ia_css_flash_sp_in_use
@@ -1877,7 +1877,7 @@ more details.
 #define HIVE_ADDR_sp_ia_css_flash_sp_in_use 0x4B00
 #define HIVE_SIZE_sp_ia_css_flash_sp_in_use 4
 
-/* function ia_css_thread_sem_sp_wait: 6F04 */
+/* function ia_css_thread_sem_sp_wait: 6EE5 */
 
 #ifndef HIVE_MULTIPLE_PROGRAMS
 #ifndef HIVE_MEM_sp_sleep_mode
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_api_version.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_api_version.h
index 49e20f8..b0caf2a 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_api_version.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/css_api_version.h
@@ -34,7 +34,7 @@ The version string has four dot-separated numbers, read left to right:
 
 */
 
-#define CSS_API_VERSION_STRING	"2.1.21.3"
+#define CSS_API_VERSION_STRING	"2.1.22.2"
 
 /*
 Change log
@@ -478,13 +478,19 @@ v2.1.21.1, Update FW Warnings in CSS_API
 v2.1.21.3 (1 changes parallel), Enable BNLM API
 - add ia_css_bnlm_config struct
 
-v2.1.21.3 (1 changes parallel), Provide CSS Interface to select correct raw frame type
+v2.1.22.0 (1 changes parallel), BNLM Kernel Parameter API Update
+- BNLM Kernel Parameter API Update
+
+v2.1.22.1 (2 changes parallel), Provide CSS Interface to select correct raw frame type
 - Add an enum ia_css_raw_type to ia_css_stream_input_config
 - For new RGBIR sensor use cases ia_css_raw_type should be set to
 - IA_CSS_RAW_RGBIR_IR_ON_Gr for IR on Gr case
 - IA_CSS_RAW_RGBIR_IR_ON_Gb for IR on Gb case
 - Frame type for future RAW hybrid sensors can be added here
 
+v2.1.22.2, Enable TDF API
+- add ia_css_tdf_config struct
+
 */
 
 #endif /*__CSS_API_VERSION_H*/
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css.h
index 7acd778..e074ebf 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css.h
@@ -1,4 +1,4 @@
-/* Release Version: irci_ecr-master_20160308_0202 */
+/* Release Version: irci_ecr-master_20160315_0113 */
 /**
 Support for Intel Camera Imaging ISP subsystem.
 Copyright (c) 2010 - 2015, Intel Corporation.
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_types.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_types.h
index bb03958..99f8575 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_types.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_types.h
@@ -1,4 +1,4 @@
-/* Release Version: irci_ecr-master_20160308_0202 */
+/* Release Version: irci_ecr-master_20160315_0113 */
 /**
 Support for Intel Camera Imaging ISP subsystem.
 Copyright (c) 2010 - 2015, Intel Corporation.
@@ -51,6 +51,7 @@ more details.
 #include "isp/kernels/macc/macc1_5/ia_css_macc1_5_types.h"
 #include "isp/kernels/dpc2/ia_css_dpc2_types.h"
 #include "isp/kernels/bnlm/ia_css_bnlm_types.h"
+#include "isp/kernels/tdf/tdf_1.0/ia_css_tdf_types.h"
 #include "isp/kernels/eed1_8/ia_css_eed1_8_types.h"
 #include "isp/kernels/ob/ob_1.0/ia_css_ob_types.h"
 #include "isp/kernels/ob/ob2/ia_css_ob2_types.h"
@@ -568,7 +569,7 @@ struct ia_css_isp_config {
 							[OB2, 2.7only] */
 	struct ia_css_ctc2_config    *ctc2_config;    /**< Chroma Tone Control
 							[CTC2, 2.7] */
-	struct ia_css_iefd2_6_config *iefd2_6_config; /**<Image Enhancement Filter Directed
+	struct ia_css_iefd2_6_config *iefd2_6_config; /**< Image Enhancement Filter Directed
 							[IEFD2_6, 2.7] */
 	struct ia_css_macc1_5_config *macc1_5_config; /**< MACC
 							[MACC1.5, 2.7only] */
@@ -578,6 +579,7 @@ struct ia_css_isp_config {
 								[XNR3_0_11] */
 	struct ia_css_bnlm_config    *bnlm_config;    /**< Bayer Non-Linear Mean
 							[BNLM, 2.7only] */
+	struct ia_css_tdf_config     *tdf_config;     /**< Transform Domain Filter */
 
 	struct ia_css_2500_lin_kernel_config     *lin_2500_config;       /**< Skylake: Linearization config */
 	struct ia_css_2500_obgrid_kernel_config  *obgrid_2500_config;    /**< Skylake: OBGRID config */
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_version_data.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_version_data.h
index e71f903..67fb366 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_version_data.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/ia_css_version_data.h
@@ -22,7 +22,7 @@ more details.
 #define __IA_CSS_VERSION_DATA_H
 
 
-#define CSS_VERSION_STRING "REL:20160308_10.2_0657; API:2.1.21.3; GIT:irci___#38d89cfd197cf4155d8ff30fec5762e02efd68aa; SDK:; USER:viedifw; "
+#define CSS_VERSION_STRING "REL:20160315_11.2_0521; API:2.1.22.2; GIT:irci___#64cb3e22e01a43907f4b6bd2675c1a48a9b4ff1a; SDK:; USER:viedifw; "
 
 
 #endif
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_default.host.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_default.host.c
index 9802c0c..51077d1 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_default.host.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_default.host.c
@@ -19,16 +19,6 @@ const struct ia_css_bnlm_config default_bnlm_config = {
 	.rad_enable = true,
 	.rad_x_origin = -1640,
 	.rad_y_origin = -1232,
-	.avg_min_th = 127,
-	.max_min_th = 2047,
-
-	.exp_coeff_a = 6048,
-	.exp_coeff_b = 7828,
-	.exp_coeff_c = 0,
-	.exp_exponent = 3,
-
-	.nl_th = {90, 22, 11},
-	.match_quality_max_idx = {3, 3, 3, 1},
 
 	.mu_root_lut_thr = {
 		26, 56, 128, 216, 462, 626, 932, 1108, 1480, 1564, 1824, 1896, 2368, 3428, 4560},
@@ -38,18 +28,24 @@ const struct ia_css_bnlm_config default_bnlm_config = {
 		236, 328, 470, 774, 964, 1486, 2294, 3244, 4844, 6524, 6524, 6524, 6524, 6524, 6524},
 	.sad_norm_lut_val = {
 		8064, 7680, 7168, 6144, 5120, 3840, 2560, 2304, 1984, 1792, 1792, 1792, 1792, 1792, 1792, 1792},
-	.sig_detail_lut_thr = {
-		2936, 3354, 3943, 4896, 5230, 5682, 5996, 7299, 7299, 7299, 7299, 7299, 7299, 7299, 7299},
-	.sig_detail_lut_val = {
-		8191, 7680, 7168, 6144, 5120, 4608, 4224, 4032, 4032, 4032, 4032, 4032, 4032, 4032, 4032, 4032},
 	.sig_rad_lut_thr = {
 		18, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20},
 	.sig_rad_lut_val = {
 		2560, 7168, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188, 8188},
+	.sig_detail_lut_thr = {
+		2936, 3354, 3943, 4896, 5230, 5682, 5996, 7299, 7299, 7299, 7299, 7299, 7299, 7299, 7299},
+	.sig_detail_lut_val = {
+		8191, 7680, 7168, 6144, 5120, 4608, 4224, 4032, 4032, 4032, 4032, 4032, 4032, 4032, 4032, 4032},
 	.rad_pow_lut_thr = {
 		0, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013, 7013},
 	.rad_pow_lut_val = {
 		8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191},
+
+	.exp_coeff_a = 6048,
+	.exp_coeff_b = 7828,
+	.exp_coeff_c = 0,
+	.exp_exponent = 3,
+
 	.nl_0_lut_thr = {
 		1072, 7000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000},
 	.nl_0_lut_val = {
@@ -67,5 +63,11 @@ const struct ia_css_bnlm_config default_bnlm_config = {
 	.nl_3_lut_val = {
 		3072, 4104, 4608, 5120, 6144, 7168, 7680, 8128, 8191, 8191, 8191, 8191, 8191, 8191, 8191, 8191},
 
+	.nl_th = {90, 22, 11},
+	.match_quality_max_idx = {3, 3, 3, 1},
+
+	.avg_min_th = 127,
+	.max_min_th = 2047,
+
 };
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_types.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_types.h
index 700a5d3..42155c9 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_types.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/bnlm/ia_css_bnlm_types.h
@@ -33,25 +33,6 @@ struct ia_css_bnlm_config {
 	bool		rad_enable;	/**< Enable a radial dependency in a weight calculation */
 	int32_t		rad_x_origin;	/**< Initial x coordinate for a radius calculation */
 	int32_t		rad_y_origin;	/**< Initial x coordinate for a radius calculation */
-	int32_t		avg_min_th;	/**< Threshold for avg of weights. if this < Th
-					  * do not denoise pixel */
-	int32_t		max_min_th;	/**< min weight for denoising. if max < th,
-					 * do not denoise pixel */
-
-	/**@{*/
-	/** Coefficient for approximation, in the form of (1 + x / N)^N,
-	 * that fits the first-order exp() to default exp_lut in BNLM sheet
-	 * */
-	int32_t		exp_coeff_a;
-	uint32_t	exp_coeff_b;
-	int32_t		exp_coeff_c;
-	uint32_t	exp_exponent;
-	/**@}*/
-
-	int32_t nl_th[3];	/**< Detail thresholds */
-
-	/** Index for n-th maximum candidate weight for each detail group */
-	int32_t match_quality_max_idx[4];
 
 	/**@{*/
 	/** A lookup table for 1/sqrt(1+mu) approximation */
@@ -64,20 +45,30 @@ struct ia_css_bnlm_config {
 	int32_t sad_norm_lut_val[16];
 	/**@}*/
 	/**@{*/
-	/** A lookup table that models a weight's dependency on textures */
-	int32_t sig_detail_lut_thr[15];
-	int32_t sig_detail_lut_val[16];
-	/**@}*/
-	/**@{*/
 	/** A lookup table that models a weight's dependency on a pixel's radial distance */
 	int32_t sig_rad_lut_thr[15];
 	int32_t sig_rad_lut_val[16];
 	/**@}*/
 	/**@{*/
+	/** A lookup table that models a weight's dependency on textures */
+	int32_t sig_detail_lut_thr[15];
+	int32_t sig_detail_lut_val[16];
+	/**@}*/
+	/**@{*/
 	/** A lookup table to control denoise power depending on a pixel's radial distance */
 	int32_t rad_pow_lut_thr[15];
 	int32_t rad_pow_lut_val[16];
 	/**@}*/
+
+	/**@{*/
+	/** Coefficient for approximation, in the form of (1 + x / N)^N,
+	 * that fits the first-order exp() to default exp_lut in BNLM sheet
+	 * */
+	int32_t		exp_coeff_a;
+	uint32_t	exp_coeff_b;
+	int32_t		exp_coeff_c;
+	uint32_t	exp_exponent;
+
 	/**@{*/
 	/** Non linear transfer functions to calculate the blending coefficient depending on detail group */
 	/** detail group 0 */
@@ -100,6 +91,17 @@ struct ia_css_bnlm_config {
 	int32_t nl_3_lut_thr[15];
 	int32_t nl_3_lut_val[16];
 	/**@}*/
+
+	int32_t nl_th[3];	/**< Detail thresholds */
+
+	/** Index for n-th maximum candidate weight for each detail group */
+	int32_t match_quality_max_idx[4];
+
+	/**@}*/
+	/** a threshold for average of weights if this < Th, do not denoise pixel */
+	int32_t		avg_min_th;
+	/** minimum weight for denoising if max < th, do not denoise pixel */
+	int32_t		max_min_th;
 	/**@}*/
 };
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.c
index 1d9b6c8..ddbf538 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.c
@@ -16,37 +16,62 @@ more details.
 #include "ia_css_debug.h"
 #include "ia_css_tdf.host.h"
 
-const int16_t g_pyramid[8][8] = {
-{128, 384, 640, 896, 896, 640, 384, 128},
-{384, 1152, 1920, 2688, 2688, 1920, 1152, 384},
-{640, 1920, 3200, 4480, 4480, 3200, 1920, 640},
-{896, 2688, 4480, 6272, 6272, 4480, 2688, 896},
-{896, 2688, 4480, 6272, 6272, 4480, 2688, 896},
-{640, 1920, 3200, 4480, 4480, 3200, 1920, 640},
-{384, 1152, 1920, 2688, 2688, 1920, 1152, 384},
-{128, 384, 640, 896, 896, 640, 384, 128}
-};
+#define TDF_BLOCK_SIZE_X (8)
+#define TDF_BLOCK_SIZE_Y (8)
 
 void
 ia_css_tdf_vmem_encode(
-	struct ia_css_isp_tdf_vmem_params *to,
+	struct tdf_vmem_params *to,
 	const struct ia_css_tdf_config *from,
 	size_t size)
 {
-	unsigned i;
+	unsigned block, c;
+	unsigned rows = TDF_BLOCK_SIZE_Y;
+	unsigned cols = TDF_BLOCK_SIZE_X;
 	(void)size;
 
-	for (i = 0; i < ISP_VEC_NELEMS; i++) {
-		to->pyramid[0][i]          = g_pyramid[i/8][i%8];
-		to->threshold_flat[0][i]   = from->thres_flat_table[i];
-		to->threshold_detail[0][i] = from->thres_detail_table[i];
+	/* encode thresholds for all four 8x8 blocks being processed.
+	 * Blocks after Forward transform are transposed and interleaved
+	 * while original threshold table is non-interleaved
+	 * following code encodes threshold table in transposed + interleaved format
+	 * in each inner loop it reads 2 rows and writes 2 collumns of output Threshold Blocks
+	 */
+
+	for (block = 0; block < TDF_PARAM_SIZE; block++) {
+		for (c = 0; c < ISP_VEC_NELEMS/rows; c++)
+		{
+			int input_col = block*2 + c*rows;
+
+			to->Threshold_Flat[block][c]          = from->thres_flat_table[input_col];
+			to->Threshold_Flat[block][c + cols]   = from->thres_flat_table[input_col];
+			to->Threshold_Flat[block][c + 2*cols] = from->thres_flat_table[input_col];
+			to->Threshold_Flat[block][c + 3*cols] = from->thres_flat_table[input_col];
+
+			to->Threshold_Detail[block][c]          = from->thres_detail_table[input_col];
+			to->Threshold_Detail[block][c + cols]   = from->thres_detail_table[input_col];
+			to->Threshold_Detail[block][c + 2*cols] = from->thres_detail_table[input_col];
+			to->Threshold_Detail[block][c + 3*cols] = from->thres_detail_table[input_col];
+
+			to->Threshold_Flat[block][c + 4*cols] = from->thres_flat_table[input_col + 1];
+			to->Threshold_Flat[block][c + 5*cols] = from->thres_flat_table[input_col + 1];
+			to->Threshold_Flat[block][c + 6*cols] = from->thres_flat_table[input_col + 1];
+			to->Threshold_Flat[block][c + 7*cols] = from->thres_flat_table[input_col + 1];
+
+			to->Threshold_Detail[block][c + 4*cols] = from->thres_detail_table[input_col + 1];
+			to->Threshold_Detail[block][c + 5*cols] = from->thres_detail_table[input_col + 1];
+			to->Threshold_Detail[block][c + 6*cols] = from->thres_detail_table[input_col + 1];
+			to->Threshold_Detail[block][c + 7*cols] = from->thres_detail_table[input_col + 1];
+
+		}
 	}
 
 }
 
+#define TDF_WORD_MAX (8191)
+
 void
 ia_css_tdf_encode(
-	struct ia_css_isp_tdf_dmem_params *to,
+	struct tdf_dmem_params *to,
 	const struct ia_css_tdf_config *from,
 	size_t size)
 {
@@ -55,15 +80,21 @@ ia_css_tdf_encode(
 	to->Epsilon_1        = from->epsilon_1;
 	to->EpsScaleText     = from->eps_scale_text;
 	to->EpsScaleEdge     = from->eps_scale_edge;
-	to->Sepa_flat	     = from->sepa_flat;
-	to->Sepa_Edge	     = from->sepa_edge;
+	to->Sepa_Flat        = from->sepa_flat;
+	to->Sepa_Edge        = from->sepa_edge;
 	to->Blend_Flat	     = from->blend_flat;
 	to->Blend_Text	     = from->blend_text;
 	to->Blend_Edge	     = from->blend_edge;
 	to->Shading_Gain     = from->shading_gain;
-	to->Shading_baseGain = from->shading_base_gain;
+	to->Shading_BaseGain = from->shading_base_gain;
 	to->LocalY_Gain      = from->local_y_gain;
-	to->LocalY_baseGain  = from->local_y_base_gain;
+	to->LocalY_BaseGain  = from->local_y_base_gain;
+	to->RadX_Origin      = from->rad_x_origin;
+	to->RadY_Origin      = from->rad_y_origin;
+	to->Blend_Ratio      = from->blend_ratio;
+	to->Min_Edge_Thres   = from->min_edge_thres;
+	to->InvEpsScaleEdge  = (int32_t)((((float)TDF_WORD_MAX * 2)/from->eps_scale_edge) + 0.5f);
+	to->InvEpsScaleText  = (int32_t)((((float)TDF_WORD_MAX * 2)/from->eps_scale_text) + 0.5f);
 }
 
 void
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.h
index 45d47bd..eb9b427 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf.host.h
@@ -21,13 +21,13 @@ more details.
 
 void
 ia_css_tdf_vmem_encode(
-	struct ia_css_isp_tdf_vmem_params *to,
+	struct tdf_vmem_params *to,
 	const struct ia_css_tdf_config *from,
 	size_t size);
 
 void
 ia_css_tdf_encode(
-	struct ia_css_isp_tdf_dmem_params *to,
+	struct tdf_dmem_params *to,
 	const struct ia_css_tdf_config *from,
 	size_t size);
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_default.host.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_default.host.c
index 0c46309..ab78d43 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_default.host.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_default.host.c
@@ -15,22 +15,38 @@ more details.
 #include "ia_css_tdf_types.h"
 
 const struct ia_css_tdf_config default_tdf_config = {
-	.thres_flat_table = {0},
-	.thres_detail_table = {0},
+	.thres_flat_table = {  0,   0,  92,  38,  77,  30,  62,  24,
+	                       0,   0, 147,  92, 123,  77,  99,  62,
+	                      92,  38,  92,  38,  77,  30,  62,  24,
+	                     147,  92, 147,  92, 123,  77,  99,  62,
+	                      77,  30,  77,  30,  77,  30,  62,  24,
+	                     123,  77, 123,  77, 123,  77,  99,  62,
+	                      62,  24,  62,  24,  62,  24,  30,  12,
+	                      99,  62,  99,  62,  99,  62,  50,  30},
+	.thres_detail_table = { 0, 0, 5, 2, 3, 2, 2, 1,
+	                        0, 0, 6, 5, 4, 3, 2, 2,
+	                        5, 2, 5, 2, 3, 2, 1, 0,
+	                        6, 5, 6, 5, 4, 3, 1, 1,
+	                        3, 2, 3, 2, 3, 2, 0, 0,
+	                        4, 3, 4, 3, 4, 3, 1, 0,
+	                        2, 1, 1, 0, 0, 0, 0, 0,
+	                        2, 2, 1, 1, 1, 0, 0, 0},
 	.epsilon_0 = 4095,
 	.epsilon_1 = 5733,
 	.eps_scale_text = 409,
-	.eps_scale_edge = 3686,
-	.sepa_flat = 1294,
-	.sepa_edge = 4095,
+	.eps_scale_edge = 3685,
+	.sepa_flat = 81,
+	.sepa_edge = 256,
 	.blend_flat = 819,
 	.blend_text = 819,
 	.blend_edge = 8191,
 	.shading_gain = 1024,
-	.shading_base_gain = 8191,
+	.shading_base_gain = 512,
 	.local_y_gain = 0,
-	.local_y_base_gain = 2047,
+	.local_y_base_gain = 512,
 	.rad_x_origin = 0,
-	.rad_y_origin = 0
+	.rad_y_origin = 0,
+	.blend_ratio = 4096,
+	.min_edge_thres = 0
 };
 
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_param.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_param.h
index 796d7f2..1fd5681 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_param.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_param.h
@@ -17,27 +17,33 @@ more details.
 
 #include "type_support.h"
 #include "vmem.h" /* needed for VMEM_ARRAY */
+#include "ia_css_tdf_types.h"
 
-struct ia_css_isp_tdf_vmem_params {
-	VMEM_ARRAY(pyramid, ISP_VEC_NELEMS);
-	VMEM_ARRAY(threshold_flat, ISP_VEC_NELEMS);
-	VMEM_ARRAY(threshold_detail, ISP_VEC_NELEMS);
+struct tdf_vmem_params {
+	VMEM_ARRAY(Threshold_Flat, TDF_PARAM_SIZE*ISP_VEC_NELEMS);
+	VMEM_ARRAY(Threshold_Detail, TDF_PARAM_SIZE*ISP_VEC_NELEMS);
 };
 
-struct ia_css_isp_tdf_dmem_params {
+struct tdf_dmem_params {
 	int32_t Epsilon_0;
 	int32_t Epsilon_1;
 	int32_t EpsScaleText;
 	int32_t EpsScaleEdge;
-	int32_t Sepa_flat;
+	int32_t Sepa_Flat;
 	int32_t Sepa_Edge;
 	int32_t Blend_Flat;
 	int32_t Blend_Text;
 	int32_t Blend_Edge;
 	int32_t Shading_Gain;
-	int32_t Shading_baseGain;
+	int32_t Shading_BaseGain;
 	int32_t LocalY_Gain;
-	int32_t LocalY_baseGain;
+	int32_t LocalY_BaseGain;
+	int32_t RadX_Origin;
+	int32_t RadY_Origin;
+	int32_t Blend_Ratio;
+	int32_t Min_Edge_Thres;
+	int32_t InvEpsScaleEdge;
+	int32_t InvEpsScaleText;
 };
 
 #endif /* __IA_CSS_TDF_PARAM_H */
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_types.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_types.h
index ca563c4..0014ee1 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_types.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/kernels/tdf/tdf_1.0/ia_css_tdf_types.h
@@ -21,13 +21,16 @@ more details.
 
 #include "type_support.h"
 
+/*  4 inteleaved threshold tables required for 4 interleaved blocks after forward transforms */
+#define TDF_PARAM_SIZE    (4)	/**< 4 interleaved threshold tables */
+
 /** Transform Domain Filter configuration
  *
  * \brief TDF public parameters.
  * \details Struct with all parameters for the TDF kernel that can be set
  * from the CSS API.
  *
- * ISP2.6.1: TDF is used.
+ * ISP2.7: TDF is used.
  */
 struct ia_css_tdf_config {
 	int32_t thres_flat_table[64];	/**< Final optimized strength table of NR for flat region. */
@@ -47,6 +50,8 @@ struct ia_css_tdf_config {
 	int32_t local_y_base_gain;	/**< Base gain of local luminance control. */
 	int32_t rad_x_origin;		/**< Initial x coord. for radius computation. */
 	int32_t rad_y_origin;		/**< Initial y coord. for radius computation. */
+	int32_t blend_ratio;        /**< Blending ratio between pixel and filtered pixel. */
+	int32_t min_edge_thres;     /**< Threshold for blending pixels. */
 };
 
 #endif /* __IA_CSS_TDF_TYPES_H */
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/modes/interface/isp_const.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/modes/interface/isp_const.h
index 1cfa8f7..899a9fc 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/modes/interface/isp_const.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/isp/modes/interface/isp_const.h
@@ -77,37 +77,31 @@ more details.
 #define SH_CSS_BINARY_ID_PRIMARY_14MP             30
 #define SH_CSS_BINARY_ID_PRIMARY_16MP             31
 #define SH_CSS_BINARY_ID_PRIMARY_REF              32
-#define SH_CSS_BINARY_ID_PRIMARY_ISP261_STAGE0        33
-#define SH_CSS_BINARY_ID_PRIMARY_ISP261_STAGE1        34
-#define SH_CSS_BINARY_ID_PRIMARY_ISP261_STAGE2        35
-#define SH_CSS_BINARY_ID_PRIMARY_ISP261_STAGE3        36
-#define SH_CSS_BINARY_ID_PRIMARY_ISP261_STAGE4        37
-#define SH_CSS_BINARY_ID_PRIMARY_ISP261_STAGE5        38
-#define SH_CSS_BINARY_ID_VIDEO_OFFLINE            39
-#define SH_CSS_BINARY_ID_VIDEO_DS                 40
-#define SH_CSS_BINARY_ID_VIDEO_YUV_DS             41
-#define SH_CSS_BINARY_ID_VIDEO_DZ                 42
-#define SH_CSS_BINARY_ID_VIDEO_DZ_2400_ONLY       43
-#define SH_CSS_BINARY_ID_VIDEO_HIGH               44
-#define SH_CSS_BINARY_ID_VIDEO_NODZ               45
-#define SH_CSS_BINARY_ID_VIDEO_CONT_MULTIBDS_ISP2_MIN 46
-#define SH_CSS_BINARY_ID_VIDEO_CONT_BDS_300_600_ISP2_MIN 47
-#define SH_CSS_BINARY_ID_VIDEO_CONT_DPC_BDS150_ISP2_MIN 48
-#define SH_CSS_BINARY_ID_VIDEO_CONT_BDS150_ISP2_MIN   49
-#define SH_CSS_BINARY_ID_VIDEO_CONT_DPC_BDS200_ISP2_MIN   50
-#define SH_CSS_BINARY_ID_VIDEO_CONT_BDS200_ISP2_MIN   51
-#define SH_CSS_BINARY_ID_VIDEO_CONT_NOBDS_ISP2_MIN    52
-#define SH_CSS_BINARY_ID_VIDEO_DZ_ISP2_MIN      53
-#define SH_CSS_BINARY_ID_VIDEO_DZ_ISP2          54
-#define SH_CSS_BINARY_ID_VIDEO_LP_ISP2          55
-#define SH_CSS_BINARY_ID_VIDEO_DZ_ISP2_MIN_DVS  56
-#define SH_CSS_BINARY_ID_RESERVED1              57
-#define SH_CSS_BINARY_ID_ACCELERATION           58
-#define SH_CSS_BINARY_ID_PRE_DE_ISP2            59
-#define SH_CSS_BINARY_ID_KERNEL_TEST_LOAD_STORE 60
-#define SH_CSS_BINARY_ID_CAPTURE_PP_BLI         61
-#define SH_CSS_BINARY_ID_CAPTURE_PP_LDC         62
-#define SH_CSS_BINARY_ID_PRIMARY_STRIPED_ISP2_XNR      63
+#define SH_CSS_BINARY_ID_VIDEO_OFFLINE            33
+#define SH_CSS_BINARY_ID_VIDEO_DS                 34
+#define SH_CSS_BINARY_ID_VIDEO_YUV_DS             35
+#define SH_CSS_BINARY_ID_VIDEO_DZ                 36
+#define SH_CSS_BINARY_ID_VIDEO_DZ_2400_ONLY       37
+#define SH_CSS_BINARY_ID_VIDEO_HIGH               38
+#define SH_CSS_BINARY_ID_VIDEO_NODZ               39
+#define SH_CSS_BINARY_ID_VIDEO_CONT_MULTIBDS_ISP2_MIN    40
+#define SH_CSS_BINARY_ID_VIDEO_CONT_BDS_300_600_ISP2_MIN 41
+#define SH_CSS_BINARY_ID_VIDEO_CONT_DPC_BDS150_ISP2_MIN  42
+#define SH_CSS_BINARY_ID_VIDEO_CONT_BDS150_ISP2_MIN      43
+#define SH_CSS_BINARY_ID_VIDEO_CONT_DPC_BDS200_ISP2_MIN  44
+#define SH_CSS_BINARY_ID_VIDEO_CONT_BDS200_ISP2_MIN      45
+#define SH_CSS_BINARY_ID_VIDEO_CONT_NOBDS_ISP2_MIN       46
+#define SH_CSS_BINARY_ID_VIDEO_DZ_ISP2_MIN      47
+#define SH_CSS_BINARY_ID_VIDEO_DZ_ISP2          48
+#define SH_CSS_BINARY_ID_VIDEO_LP_ISP2          49
+#define SH_CSS_BINARY_ID_VIDEO_DZ_ISP2_MIN_DVS  50
+#define SH_CSS_BINARY_ID_RESERVED1              51
+#define SH_CSS_BINARY_ID_ACCELERATION           52
+#define SH_CSS_BINARY_ID_PRE_DE_ISP2            53
+#define SH_CSS_BINARY_ID_KERNEL_TEST_LOAD_STORE 54
+#define SH_CSS_BINARY_ID_CAPTURE_PP_BLI         55
+#define SH_CSS_BINARY_ID_CAPTURE_PP_LDC         56
+#define SH_CSS_BINARY_ID_PRIMARY_STRIPED_ISP2_XNR      57
 
 /* skycam kerneltest pipelines */
 #define SH_CSS_BINARY_ID_VIDEO_KERNELTEST_NORM              121
@@ -213,14 +207,15 @@ more details.
 #define SH_CSS_BINARY_ID_VIDEO_KERNELTEST_TNR3_STRIPED      402
 
 /* ISP 2.7 camera binaries */
-#define SH_CSS_BINARY_ID_PRE_DE_ISP27						501
-#define SH_CSS_BINARY_ID_PRE_DE_ISP27_STAGE1				502
-#define SH_CSS_BINARY_ID_CONT_PRE_DE_ISP27					503
-#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE0				504
-#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE1				505
-#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE2				506
-#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE3				507
-#define SH_CSS_BINARY_ID_CAPTURE_PP_ISP27					508
+#define SH_CSS_BINARY_ID_PRE_DE_ISP27                       501
+#define SH_CSS_BINARY_ID_PRE_DE_ISP27_STAGE1                502
+#define SH_CSS_BINARY_ID_PRE_DE_ISP27_STAGE2                503
+#define SH_CSS_BINARY_ID_CONT_PRE_DE_ISP27                  504
+#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE0               505
+#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE1               506
+#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE2               507
+#define SH_CSS_BINARY_ID_PRIMARY_ISP27_STAGE3               508
+#define SH_CSS_BINARY_ID_CAPTURE_PP_ISP27                   509
 
 #define XMEM_WIDTH_BITS              HIVE_ISP_DDR_WORD_BITS
 #define XMEM_SHORTS_PER_WORD         (HIVE_ISP_DDR_WORD_BITS/16)
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/binary/interface/ia_css_binary.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/binary/interface/ia_css_binary.h
index a761c00..54ab384 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/binary/interface/ia_css_binary.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/binary/interface/ia_css_binary.h
@@ -38,21 +38,21 @@ more details.
 #define IA_CSS_BINARY_MODE_VF_PP      9
 #define IA_CSS_BINARY_MODE_PRE_DE		10
 #define IA_CSS_BINARY_MODE_PRE_DE_STAGE1	11
-#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE0    12
-#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE1    13
-#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE2    14
-#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE3    15
-#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE4    16
-#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE5    17
-#define IA_CSS_BINARY_NUM_MODES       18
+#define IA_CSS_BINARY_MODE_PRE_DE_STAGE2	12
+#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE0    13
+#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE1    14
+#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE2    15
+#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE3    16
+#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE4    17
+#define IA_CSS_BINARY_MODE_PRIMARY_HQ_STAGE5    18
+#define IA_CSS_BINARY_NUM_MODES                 19
 
-#define MAX_NUM_PRIMARY_STAGES 6
-#define NUM_PRIMARY_HQ_STAGES  6  /* number of primary stages for ISP2.6.1 high quality pipe */
 #define NUM_PRIMARY_HQ27_STAGES 4 /* number of primary stages for ISP2.7 high quality pipe */
 #define NUM_PRIMARY_STAGES     1  /* number of primary satges for ISP1/ISP2.2 pipe */
+#define MAX_NUM_PRIMARY_STAGES NUM_PRIMARY_HQ27_STAGES
 
 #define NUM_PRE_DE_STAGES       1 /* number of pre-de binaries can be loaded on non-ISP2.7 pipe */
-#define NUM_PRE_DE_ISP27_STAGES 2 /* number of pre-de binaries can be loaded on ISP2.7 pipe */
+#define NUM_PRE_DE_ISP27_STAGES 3 /* number of pre-de binaries can be loaded on ISP2.7 pipe */
 #define MAX_NUM_PRE_DE_STAGES   NUM_PRE_DE_ISP27_STAGES
 
 /* Indicate where binaries can read input from */
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/pipeline/src/pipeline.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/pipeline/src/pipeline.c
index cd777c5..68477f0 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/pipeline/src/pipeline.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/runtime/pipeline/src/pipeline.c
@@ -893,6 +893,8 @@ get_shared_stage_buffer_size(unsigned int width, unsigned int height, unsigned b
 	 *         frame * 2 raw_bit_depth
 	 * PRE_DE #1 (RAW format):        2 frames (of padded input-res)
 	 *         frame * 2 raw_bit_depth
+	 * PRE_DE #2 (RAW format):        2 frames (of padded input-res)
+	 *         frame * 2 raw_bit_depth
 	 * PRIMARY #0 (EED, YCgCo444_16): 6 frames (of padded inupt-res)
 	 *         frame * 3 YUV * 2 bytes/elem
 	 * PRIMARY #1 (IEFD, YUV420_16) : 3 frames (of padded input-res)
@@ -904,8 +906,8 @@ get_shared_stage_buffer_size(unsigned int width, unsigned int height, unsigned b
 	 * ...
 	 * To ensure shared_frames are sufficiently allocated for 2 largest of stage buffers,
 	 * we'll allocate
-	 *   buf_idx0 : 6 frames (PRE_DE #0, PRIM #0, PRIM #2 ..)
-	 *   buf_idx1 : 3 frames (PRE_DE #1, PRIM #1, PRIM #3 ..)
+	 *   buf_idx0 : 3 frames (PRE_DE #0, PRE_DE #2, PRIM #1, PRIM #3 ..)
+	 *   buf_idx1 : 6 frames (PRE_DE #1, PRIM #0,   PRIM #2 ..)
 	 */
 
 	/* PRIMARY #0 requires the largest buffer, PRIMARY #1 requires the second largest */
@@ -920,4 +922,4 @@ get_shared_stage_buffer_size(unsigned int width, unsigned int height, unsigned b
 		return prim1_size;
 	else
 		return 0;
-}
\ No newline at end of file
+}
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css.c
index 006e7fa..7051315 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css.c
@@ -6156,9 +6156,6 @@ static enum ia_css_err set_num_primary_stages(unsigned int *num,
 			}
 		}
 		break;
-	case IA_CSS_PIPE_VERSION_2_6_1:
-		*num = NUM_PRIMARY_HQ_STAGES;
-		break;
 	case IA_CSS_PIPE_VERSION_2_2:
 	case IA_CSS_PIPE_VERSION_1:
 		*num = NUM_PRIMARY_STAGES;
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_defs.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_defs.h
index 25df326..9f42fd4 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_defs.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_defs.h
@@ -85,7 +85,7 @@ more details.
  * will be evaluted to 0 in preprocessing time. */
 #define SH_CSS_ISP_PIPE_VERSION_1	1
 #define SH_CSS_ISP_PIPE_VERSION_2_2	2
-#define SH_CSS_ISP_PIPE_VERSION_2_6_1	3
+#define SH_CSS_ISP_PIPE_VERSION_2_6_1	3 /* obsolete */
 #define SH_CSS_ISP_PIPE_VERSION_2_7	4
 
 /*--------------- sRGB Gamma -----------------
@@ -401,12 +401,12 @@ RGB[0,8191],coef[-8192,8191] -> RGB[0,8191]
 #else
 #if !defined(USE_INPUT_SYSTEM_VERSION_2401) && !defined(IS_ISP_2401_MAMOIADA)
 /* ISP2.7: primary_stage[1-4], capture_pp, vf_pp,
- * yuv_scale[1-2], pre_de[1-2], copy
+ * yuv_scale[1-2], pre_de[1-3], copy
  *
  * IS_ISP_2401_MAMOIADA needs to check to ensure sh_css_internal.h obtain
  * value correctly
  */
-#define SH_CSS_MAX_STAGES 11
+#define SH_CSS_MAX_STAGES 12
 #else
 #define SH_CSS_MAX_STAGES 8 /* ISP2.2: primary_stage[1-6], capture_pp, vf_pp */
 #endif
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_firmware.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_firmware.c
index e626676..eefd77f 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_firmware.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_firmware.c
@@ -47,10 +47,10 @@ struct fw_param {
 /* Warning: same order as SH_CSS_BINARY_ID_* */
 static struct firmware_header *firmware_header;
 
-/* The string STR(irci_ecr-master_20160308_0202) is a place holder
+/* The string STR(irci_ecr-master_20160315_0113) is a place holder
  * which will be replaced with the actual RELEASE_VERSION
  * during package generation. Please do not modify  */
-static const char *release_version = STR(irci_ecr-master_20160308_0202);
+static const char *release_version = STR(irci_ecr-master_20160315_0113);
 
 #define MAX_FW_REL_VER_NAME	300
 static char FW_rel_ver_name[MAX_FW_REL_VER_NAME] = "---";
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.c b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.c
index 5193e89..cb7b45e 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.c
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.c
@@ -70,6 +70,7 @@ more details.
 #include "gc/gc_1.0/ia_css_gc.host.h"
 #include "dpc2/ia_css_dpc2.host.h"
 #include "bnlm/ia_css_bnlm.host.h"
+#include "tdf/tdf_1.0/ia_css_tdf.host.h"
 #include "eed1_8/ia_css_eed1_8.host.h"
 #include "iefd2_6/ia_css_iefd2_6.host.h"
 #include "macc/macc_1.0/ia_css_macc.host.h"
@@ -3397,6 +3398,7 @@ sh_css_init_isp_params_from_global(struct ia_css_stream *stream,
 		ia_css_set_eed1_8_config(params, &default_eed1_8_config);
 		ia_css_set_iefd2_6_config(params, &default_iefd2_6_config);
 		ia_css_set_bnlm_config(params, &default_bnlm_config);
+		ia_css_set_tdf_config(params, &default_tdf_config);
 
 		for (i = 0; i < stream->num_pipes; i++) {
 			if (IA_CSS_SUCCESS == sh_css_select_dp_10bpp_config(stream->pipes[i], &is_dp_10bpp)) {
@@ -3519,6 +3521,7 @@ sh_css_init_isp_params_from_global(struct ia_css_stream *stream,
 		ia_css_set_eed1_8_config(params, &stream_params->eed1_8_config);
 		ia_css_set_iefd2_6_config(params, &stream_params->iefd2_6_config);
 		ia_css_set_bnlm_config(params, &stream_params->bnlm_config);
+		ia_css_set_tdf_config(params, &stream_params->tdf_config);
 		ia_css_set_formats_config(params, &stream_params->formats_config);
 
 		for (i = 0; i < stream->num_pipes; i++) {
diff --git a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.h b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.h
index 5b604f3..3a50c68 100644
--- a/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.h
+++ b/drivers/external_drivers/camera/drivers/media/pci/atomisp2/css/sh_css_params.h
@@ -128,15 +128,16 @@ struct ia_css_isp_parameters {
 	struct ia_css_dvs_coefficients  dvs_coefs;
 	struct ia_css_dvs2_coefficients dvs2_coefs;
 	/* ISP 2.7 */
-	struct ia_css_dpc2_config   dpc2_config;
-	struct ia_css_eed1_8_config eed1_8_config;
-	struct ia_css_ob2_config    ob2_config;
-	struct ia_css_ctc2_config   ctc2_config;
-	struct ia_css_iefd2_6_config iefd2_6_config;
-	struct ia_css_macc1_5_config macc1_5_config;
-	struct ia_css_macc1_5_table macc1_5_table;
-	struct ia_css_xnr3_0_11_config   xnr3_0_11_config;
-	struct ia_css_bnlm_config    bnlm_config;
+	struct ia_css_dpc2_config	dpc2_config;
+	struct ia_css_eed1_8_config	eed1_8_config;
+	struct ia_css_ob2_config	ob2_config;
+	struct ia_css_ctc2_config	ctc2_config;
+	struct ia_css_iefd2_6_config	iefd2_6_config;
+	struct ia_css_macc1_5_config	macc1_5_config;
+	struct ia_css_macc1_5_table	macc1_5_table;
+	struct ia_css_xnr3_0_11_config	xnr3_0_11_config;
+	struct ia_css_bnlm_config	bnlm_config;
+	struct ia_css_tdf_config	tdf_config;
 
 	bool isp_params_changed;
 	bool isp_mem_params_changed
-- 
1.9.1

